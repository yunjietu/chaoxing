import{u as a}from"./vue-router-BJIyZwNj.js";import{_ as s,K as e,S as t,h as l,z as o,J as i,H as c,y as r,q as n,u as d,O as p,s as u,Q as m,R as v}from"./index-SeYMZHv7.js";import{l as g,w as b,a as h,d as f,q as y,b as j,f as w,g as k}from"./google-icon-BXU_orIT.js";import{c as _,B as C,b as x}from"./ant-design-vue-qdrtx42b.js";import{a as q,r as S,e as U,h as z,l as E,b2 as I,b as N,o as D,ai as A,ao as L,u as T,c as V,bz as B,ag as J,ah as M,J as O,be as R,aY as F,aW as K}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const P=a=>(F("data-v-4cb10770"),a=a(),K(),a),$={class:"login-container"},H={class:"box-item desc"},Q=L('<div class="welcome" data-v-4cb10770><p data-v-4cb10770>欢迎登录 SmartAdmin V3</p><p class="desc" data-v-4cb10770> SmartAdmin 是由 河南·洛阳 <a target="_blank" href="https://www.1024lab.net" style="color:white;weight:bolder;font-size:15px;text-decoration:underline;" data-v-4cb10770>1024创新实验室（1024Lab）</a> 基于SpringBoot + Sa-Token + Mybatis-Plus 和 Vue3 + Vite5 + Ant Design Vue 4 (同时支持JavaScript和TypeScript双版本) 以「高质量代码」为核心，「简洁、高效、安全」的快速开发平台。 <br data-v-4cb10770><br data-v-4cb10770><span class="setence" data-v-4cb10770> 致伟大的开发者 ： <br data-v-4cb10770>     我们希望用一套漂亮优雅的代码和一套整洁高效的代码规范，让大家在这浮躁的世界里感受到一股把代码写好的清流 ! <br data-v-4cb10770> 保持谦逊，保持学习，热爱代码，更热爱生活 !<br data-v-4cb10770> 永远年轻，永远前行 !<br data-v-4cb10770><span class="author" data-v-4cb10770><a target="_blank" href="https://zhuoda.vip" style="color:white;font-size:13px;text-decoration:underline;" data-v-4cb10770> 1024创新实验室-主任：卓大 </a></span></span></p></div>',1),W={class:"app-qr-box"},Y={class:"app-qr"},G=["src"],X=P((()=>A("span",{class:"qr-desc"}," 加微信，骚扰卓大 :) ",-1))),Z={class:"app-qr"},aa=["src"],sa=P((()=>A("div",{class:"qr-desc-marquee"},[A("div",{class:"marquee"},[A("span",null,"关注：六边形工程师，分享：赚钱、代码、生活")])],-1))),ea={class:"box-item login"},ta=["src"],la=P((()=>A("div",{class:"login-title"},"账号登录",-1))),oa=["src"],ia=P((()=>A("span",null," ( 账号：admin, 密码：123456)",-1))),ca={class:"more"},ra=P((()=>A("div",{class:"title-box"},[A("p",{class:"line"}),A("p",{class:"title"},"其他方式登录"),A("p",{class:"line"})],-1))),na={class:"login-type"},da=["src"],pa=["src"],ua=["src"],ma=["src"],va=["src"],ga=["src"],ba=["src"],ha=s({__name:"login",setup(s){const L=q({loginName:"admin",password:"",captchaCode:"",captchaUuid:"",loginDevice:e.PC.value}),F={loginName:[{required:!0,message:"用户名不能为空"}],password:[{required:!0,message:"密码不能为空"}],captchaCode:[{required:!0,message:"验证码不能为空"}]},K=S(!1),P=a(),ha=S(),fa=S(!1);async function ya(){ha.value.validate().then((async()=>{try{t.show();let a=Object.assign({},L,{password:l(L.password)});const s=await o.login(a);null!=ka&&(clearInterval(ka),ka=null),i(c.USER_TOKEN,s.data.token?s.data.token:""),x.success("登录成功"),r().setUserLoginInfo(s.data);const e=await n.getAllDictData();d().initData(e.data),p(),P.push("/home")}catch(a){a.data&&0!==a.data.code&&(L.captchaCode="",wa()),u.captureError(a)}finally{t.hide()}}))}U((()=>{document.onkeyup=a=>{13===a.keyCode&&ya()},_.success({message:"温馨提示",description:"SmartAdmin 提供 9种 登录背景风格哦！",duration:8,onClick:()=>{},btn:()=>z(C,{type:"primary",target:"_blank",size:"small",href:"https://smartadmin.vip/views/doc/front/Login.html",onClick:()=>{}},{default:()=>"去看看"})})})),E((()=>{document.onkeyup=null}));const ja=S("");async function wa(){try{let s=await o.getCaptcha();ja.value=s.data.captchaBase64Image,L.captchaUuid=s.data.captchaUuid,a=s.data.expireSeconds,null===ka&&(ka=setInterval(wa,1e3*(a-5)))}catch(s){}var a}let ka=null;U((()=>{wa(),async function(){try{let a=await o.getTwoFactorLoginFlag();_a.value=a.data}catch(a){u.captureError(a)}}()}));const _a=S(!1);let Ca=S("获取邮箱验证码"),xa=S(!1),qa=null;async function Sa(){try{t.show();await o.sendLoginEmailCode(L.loginName);x.success("验证码发送成功!请登录邮箱查看验证码~"),function(){xa.value=!0;let a=60;Ca.value=`${a}秒后重新获取`,qa=setInterval((()=>{a>1?(a--,Ca.value=`${a}秒后重新获取`):(clearInterval(qa),xa.value=!1,Ca.value="获取验证码")}),1e3)}()}catch(a){u.captureError(a)}finally{t.hide()}}return(a,s)=>{const e=I("a-input"),t=I("a-form-item"),l=I("a-button"),o=I("a-input-group"),i=I("a-input-password"),c=I("a-checkbox"),r=I("a-form");return D(),N("div",$,[A("div",H,[Q,A("div",W,[A("div",Y,[A("img",{src:T(m)},null,8,G),X]),A("div",Z,[A("img",{src:T(v)},null,8,aa),sa])])]),A("div",ea,[A("img",{class:"login-qr",src:T(g)},null,8,ta),la,V(r,{ref_key:"formRef",ref:ha,class:"login-form",model:L,rules:F},{default:B((()=>[V(t,{name:"loginName"},{default:B((()=>[V(e,{value:L.loginName,"onUpdate:value":s[0]||(s[0]=a=>L.loginName=a),valueModifiers:{trim:!0},placeholder:"请输入用户名"},null,8,["value"])])),_:1}),_a.value?(D(),J(t,{key:0,name:"emailCode"},{default:B((()=>[V(o,{compact:""},{default:B((()=>[V(e,{style:{width:"calc(100% - 110px)"},value:L.emailCode,"onUpdate:value":s[1]||(s[1]=a=>L.emailCode=a),autocomplete:"on",placeholder:"请输入邮箱验证码"},null,8,["value"]),V(l,{onClick:Sa,class:"code-btn",type:"primary",disabled:T(xa)},{default:B((()=>[O(R(T(Ca)),1)])),_:1},8,["disabled"])])),_:1})])),_:1})):M("",!0),V(t,{name:"password"},{default:B((()=>[V(i,{value:L.password,"onUpdate:value":s[2]||(s[2]=a=>L.password=a),autocomplete:"on",type:K.value?"text":"password",placeholder:"请输入密码"},null,8,["value","type"])])),_:1}),V(t,{name:"captchaCode"},{default:B((()=>[V(e,{class:"captcha-input",value:L.captchaCode,"onUpdate:value":s[3]||(s[3]=a=>L.captchaCode=a),valueModifiers:{trim:!0},placeholder:"请输入验证码"},null,8,["value"]),A("img",{class:"captcha-img",src:ja.value,onClick:wa},null,8,oa)])),_:1}),V(t,null,{default:B((()=>[V(c,{checked:fa.value,"onUpdate:checked":s[4]||(s[4]=a=>fa.value=a)},{default:B((()=>[O("记住密码")])),_:1},8,["checked"]),ia])),_:1}),V(t,null,{default:B((()=>[A("div",{class:"btn",onClick:ya},"登录")])),_:1})])),_:1},8,["model"]),A("div",ca,[ra,A("div",na,[A("img",{src:T(b)},null,8,da),A("img",{src:T(h)},null,8,pa),A("img",{src:T(f)},null,8,ua),A("img",{src:T(y)},null,8,ma),A("img",{src:T(j)},null,8,va),A("img",{src:T(w)},null,8,ga),A("img",{src:T(k)},null,8,ba)])])])])}}},[["__scopeId","data-v-4cb10770"]]);export{ha as default};
