import{a as e,r as a,e as t,b2 as i,b as o,o as s,c as l,bz as n,J as r,ai as u,ag as p,ah as m,F as c,y as d,be as y,E as g,u as f}from"./@vue-wTDZSr7R.js";import{u as j}from"./vue-router-BJIyZwNj.js";import{c as h,s as v,P as w}from"./index-SeYMZHv7.js";import{n as b}from"./notice-api-CJupa0Sd.js";import"./ant-design-vue-qdrtx42b.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-Dk7pxPyP.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./mitt-CNZ6avp8.js";const z=["onClick"],C=["onClick"],S=u("span",{style:{color:"red"}},"（未读）",-1),k={class:"smart-query-table-page"},x={__name:"notice-employee-list",setup(x){const _=e([{title:"标题",dataIndex:"title",ellipsis:!0},{title:"访问量",dataIndex:"pageViewCount",width:90},{title:"来源",dataIndex:"source",width:150,ellipsis:!0},{title:"作者",dataIndex:"author",width:80,ellipsis:!0},{title:"发布时间",dataIndex:"publishTime",width:150}]),I=a([]);const q={noticeTypeId:void 0,keywords:"",publishTimeBegin:null,publishTimeEnd:null,notViewFlag:!1,pageNum:1,pageSize:h},T=e({...q}),N=a([]),E=a(0),V=a(!1);function F(e){T.notViewFlag=0!==e||null,U()}async function O(){try{V.value=!0;const e=await b.queryEmployeeNotice(T);N.value=e.data.list,E.value=e.data.total}catch(e){v.captureError(e)}finally{V.value=!1}}function U(){T.pageNum=1,O()}function P(){Object.assign(T,q),B.value=[],A.value=[],O()}t((()=>{!async function(){try{const e=await b.getAllNoticeTypeList();I.value=e.data}catch(e){v.captureError(e)}}(),O()}));const B=a([]);function J(e,a){T.publishTimeBegin=a[0],T.publishTimeEnd=a[1]}const A=a([]),D=j();function K(e){D.push({path:"/oa/notice/notice-employee-detail",query:{noticeId:e}})}return(e,a)=>{const t=i("a-input"),j=i("a-form-item"),h=i("a-range-picker"),v=i("SearchOutlined"),b=i("a-button"),x=i("ReloadOutlined"),I=i("a-button-group"),q=i("a-row"),A=i("a-form"),D=i("a-tab-pane"),L=i("a-tabs"),Q=i("a-table"),R=i("a-pagination"),$=i("a-card");return s(),o(c,null,[l(A,{class:"smart-query-form"},{default:n((()=>[l(q,{class:"smart-query-form-row"},{default:n((()=>[l(j,{label:"关键字",class:"smart-query-form-item"},{default:n((()=>[l(t,{style:{width:"200px"},value:T.keywords,"onUpdate:value":a[0]||(a[0]=e=>T.keywords=e),placeholder:"标题、作者、来源、文号"},null,8,["value"])])),_:1}),l(j,{label:"发布时间",class:"smart-query-form-item"},{default:n((()=>[l(h,{value:B.value,"onUpdate:value":a[1]||(a[1]=e=>B.value=e),onChange:J,style:{width:"220px"}},null,8,["value"])])),_:1}),l(j,{class:"smart-query-form-item smart-margin-left10"},{default:n((()=>[l(I,null,{default:n((()=>[l(b,{type:"primary",onClick:U},{icon:n((()=>[l(v)])),default:n((()=>[r(" 查询 ")])),_:1}),l(b,{onClick:P},{icon:n((()=>[l(x)])),default:n((()=>[r(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1}),l(q,{class:"smart-query-form-row"})])),_:1}),l($,{size:"small",bordered:!1},{default:n((()=>[l(L,{onChange:F,size:"small"},{default:n((()=>[(s(),p(D,{key:0,tab:"全部"})),(s(),p(D,{key:1,tab:"未读"}))])),_:1}),l(Q,{rowKey:"noticeId",columns:_,dataSource:N.value,pagination:!1,loading:V.value,bordered:"",size:"small"},{bodyCell:n((({column:e,record:a,text:t})=>["title"===e.dataIndex?(s(),o(c,{key:0},[d(u("span",null,[u("a",{onClick:e=>K(a.noticeId),style:{color:"#8c8c8c"}},"【"+y(a.noticeTypeName)+"】"+y(t)+"（已读）",9,z)],512),[[g,a.viewFlag]]),d(u("span",null,[u("a",{onClick:e=>K(a.noticeId)},[r("【"+y(a.noticeTypeName)+"】"+y(t)+" ",1),S],8,C)],512),[[g,!a.viewFlag]])],64)):m("",!0),"pageViewCount"===e.dataIndex?(s(),o(c,{key:1},[r(y(a.userViewCount)+"人 / "+y(a.pageViewCount)+"次 ",1)],64)):m("",!0)])),_:1},8,["columns","dataSource","loading"]),u("div",k,[l(R,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:f(w),defaultPageSize:T.pageSize,current:T.pageNum,"onUpdate:current":a[2]||(a[2]=e=>T.pageNum=e),pageSize:T.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>T.pageSize=e),total:E.value,onChange:O,onShowSizeChange:O,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1})],64)}}};export{x as default};
