import{b as e,c as a,d as l,e as t,g as n,f as i}from"./code-generator-util-BIgdvUgd.js";import{u as o}from"./index-SeYMZHv7.js";import{m as d,r as u,w as s,b2 as m,b as r,o as p,c,bz as y,F as v,b0 as f,ag as j,J as b,be as g,aR as h,i as N,ai as x,ah as I,u as w}from"./@vue-wTDZSr7R.js";import{a as T,b as _}from"./str-util-BDLBIRqu.js";import{_ as F}from"./lodash-DG05lPuJ.js";import"./ant-design-vue-qdrtx42b.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-Dk7pxPyP.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const k={__name:"index",props:{value:[Array,String,Number],placeholder:{type:String,default:"请选择字典"},width:{type:String,default:"100%"},size:{type:String,default:"default"},disabled:{type:Number,default:null}},emits:["update:value","change"],setup(e,{emit:a}){const l=e,t=d((()=>o().dictList.filter((e=>!e.disabledFlag)))),n=a,i=u(l.value);function N(e){n("update:value",e),n("change",e)}return s((()=>l.value),(e=>{i.value=e})),(a,n)=>{const o=m("a-select-option"),d=m("a-select");return p(),r("div",null,[c(d,{value:i.value,"onUpdate:value":n[0]||(n[0]=e=>i.value=e),style:h(`width: ${e.width}`),placeholder:l.placeholder,showSearch:!0,allowClear:!0,size:e.size,onChange:N,disabled:e.disabled},{default:y((()=>[(p(!0),r(v,null,f(t.value,(e=>(p(),j(o,{key:e.dictCode,value:e.dictCode},{default:y((()=>[b(g(e.dictName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","style","placeholder","size","disabled"])])}}},C={style:{float:"right",padding:"10px 0"}},U={key:1},z=x("br",null,null,-1),S={__name:"code-generator-table-config-form-field",setup(d,{expose:s}){const h=u();function S(){o().refreshData()}const K=N("tableInfo"),D=u([{title:"列名",dataIndex:"columnName",width:120,ellipsis:!0},{title:"列描述",dataIndex:"columnComment",width:120,ellipsis:!0},{title:"列类型",dataIndex:"dataType",width:100,ellipsis:!0},{title:"非空",dataIndex:"nullableFlag",width:60},{title:"字段命名",dataIndex:"fieldName",width:150},{title:"字段名词",dataIndex:"label",width:150},{title:"Java类型",dataIndex:"javaType",width:150},{title:"前端类型",dataIndex:"jsType",width:130},{title:"字典",dataIndex:"dict",width:150},{title:"枚举",dataIndex:"enumName",width:150}]),J=u([]);function R(e,a){if(!e)return null;let l=e.filter((e=>e.columnName===a));return l&&l.length>0?l[0]:null}return s({setData:function(e,a){let o=[],d=a.basic,u=K.tableName;F.startsWith(K.tableName,"t_")&&(u=F.trim(u,"_t"));let s=d&&d.moduleName?d.moduleName:u;s=T(s);for(let m of e){let e=R(a.fields,m.columnName),d={columnName:m.columnName,columnComment:m.columnComment,dataType:m.dataType,nullableFlag:m.nullableFlag,primaryKeyFlag:m.primaryKeyFlag,autoIncreaseFlag:m.autoIncreaseFlag,fieldName:e?e.fieldName:_(m.columnName),label:e?e.label:m.columnComment,javaType:e?e.javaType:i(m.dataType),jsType:e?e.jsType:n(m.dataType),dict:e?e.dict:null,enumName:e?e.enumName:l(m.columnComment)?t(s,m.columnName):null};o.push(d)}J.value=o},getFieldsForm:function(){return J.value.map((e=>({columnName:e.columnName,columnComment:e.columnComment,label:e.label,fieldName:e.fieldName,javaType:e.javaType,jsType:e.jsType,dict:e.dict,enumName:e.enumName,primaryKeyFlag:e.primaryKeyFlag,autoIncreaseFlag:e.autoIncreaseFlag})))}}),(l,t)=>{const n=m("smile-outlined"),i=m("a-alert"),o=m("a-button"),d=m("a-tag"),u=m("a-input"),s=m("a-select-option"),N=m("a-select"),T=m("a-table");return p(),r(v,null,[c(i,{closable:!0,message:"请务必将每一个字段的 “ 字段名词 ” 填写完整！！！",type:"success","show-icon":""},{icon:y((()=>[c(n)])),_:1}),x("div",C,[c(o,{type:"primary",onClick:S},{default:y((()=>[b("刷新字典")])),_:1})]),c(T,{scroll:{x:1300},size:"small",bordered:"",class:"smart-margin-top10",dataSource:J.value,columns:D.value,rowKey:"columnName",pagination:!1},{bodyCell:y((({text:l,record:t,index:n,column:i})=>["no"===i.dataIndex?(p(),r(v,{key:0},[b(g(n+1),1)],64)):I("",!0),"columnName"===i.dataIndex?(p(),r("span",U,[t.primaryKeyFlag?(p(),j(d,{key:0,color:"#f50",style:{"line-height":"12px"}},{default:y((()=>[b("主键")])),_:1})):I("",!0),t.autoIncreaseFlag?(p(),j(d,{key:1,color:"#f50",style:{"line-height":"12px"}},{default:y((()=>[b("自增")])),_:1})):I("",!0),z,b(" "+g(l),1)])):I("",!0),"nullableFlag"===i.dataIndex?(p(),r(v,{key:2},[l?I("",!0):(p(),j(d,{key:0,color:"error"},{default:y((()=>[b("非空")])),_:1}))],64)):I("",!0),"fieldName"===i.dataIndex?(p(),j(u,{key:3,value:t.fieldName,"onUpdate:value":e=>t.fieldName=e},null,8,["value","onUpdate:value"])):I("",!0),"label"===i.dataIndex?(p(),j(u,{key:4,value:t.label,"onUpdate:value":e=>t.label=e},null,8,["value","onUpdate:value"])):I("",!0),"javaType"===i.dataIndex?(p(),j(N,{key:5,value:t.javaType,"onUpdate:value":e=>t.javaType=e,style:{width:"100%"}},{default:y((()=>[(p(!0),r(v,null,f(w(e),(e=>(p(),j(s,{value:e,key:e},{default:y((()=>[b(g(e),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):I("",!0),"jsType"===i.dataIndex?(p(),j(N,{key:6,value:t.jsType,"onUpdate:value":e=>t.jsType=e,style:{width:"100%"}},{default:y((()=>[(p(!0),r(v,null,f(w(a),(e=>(p(),j(s,{value:e,key:e},{default:y((()=>[b(g(e),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):I("",!0),"dict"===i.dataIndex?(p(),j(k,{key:7,ref_key:"dictRef",ref:h,value:t.dict,"onUpdate:value":e=>t.dict=e},null,8,["value","onUpdate:value"])):I("",!0),"enumName"===i.dataIndex?(p(),j(u,{key:8,value:t.enumName,"onUpdate:value":e=>t.enumName=e},null,8,["value","onUpdate:value"])):I("",!0)])),_:1},8,["dataSource","columns"])],64)}}};export{S as default};
