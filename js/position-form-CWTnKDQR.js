import{_ as e}from"./lodash-DG05lPuJ.js";import{S as t,s as o}from"./index-SeYMZHv7.js";import{p as a}from"./position-api-Cwzz9KIn.js";import{b as s}from"./ant-design-vue-qdrtx42b.js";import{r as i,a as r,b2 as l,ag as n,o as p,bz as m,c as d,u,J as c,n as f}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const j={__name:"position-form",emits:["reloadList"],setup(j,{expose:v,emit:h}){const y=h,b=i(!1);function g(){Object.assign(N,_),b.value=!1}const w=i(),_={positionId:void 0,positionName:void 0,positionLevel:void 0,sort:0,remark:void 0};let N=r({..._});const k={positionName:[{required:!0,message:"请输入职务名称"}]};async function C(){try{await w.value.validateFields(),async function(){t.show();try{N.positionId?await a.update(N):await a.add(N),s.success("操作成功"),y("reloadList"),g()}catch(e){o.captureError(e)}finally{t.hide()}}()}catch(e){s.error("参数验证错误，请仔细填写表单数据!")}}return v({show:function(t){Object.assign(N,_),t&&!e.isEmpty(t)&&Object.assign(N,t),b.value=!0,f((()=>{w.value.clearValidate();const e=document.getElementsByClassName("ant-modal");e&&e.length>0&&Array.from(e).forEach((e=>{e.childNodes&&e.childNodes.length>0&&Array.from(e.childNodes).forEach((e=>{e.setAttribute&&e.setAttribute("aria-hidden","false")}))}))}))}}),(e,t)=>{const o=l("a-input"),a=l("a-form-item"),s=l("a-input-number"),i=l("a-form"),r=l("a-button"),f=l("a-space"),j=l("a-modal");return p(),n(j,{title:u(N).positionId?"编辑":"添加",width:"600px",open:b.value,onCancel:g,maskClosable:!1,destroyOnClose:!0,forceRender:""},{footer:m((()=>[d(f,null,{default:m((()=>[d(r,{onClick:g},{default:m((()=>[c("取消")])),_:1}),d(r,{type:"primary",onClick:C},{default:m((()=>[c("保存")])),_:1})])),_:1})])),default:m((()=>[d(i,{ref_key:"formRef",ref:w,model:u(N),rules:k,"label-col":{span:6}},{default:m((()=>[d(a,{label:"职务名称",name:"positionName"},{default:m((()=>[d(o,{style:{width:"100%"},value:u(N).positionName,"onUpdate:value":t[0]||(t[0]=e=>u(N).positionName=e),placeholder:"职务名称"},null,8,["value"])])),_:1}),d(a,{label:"职级",name:"positionLevel"},{default:m((()=>[d(o,{style:{width:"100%"},value:u(N).positionLevel,"onUpdate:value":t[1]||(t[1]=e=>u(N).positionLevel=e),placeholder:"职级"},null,8,["value"])])),_:1}),d(a,{label:"排序",name:"sort"},{default:m((()=>[d(s,{min:0,step:1,precision:0,style:{width:"100%"},value:u(N).sort,"onUpdate:value":t[2]||(t[2]=e=>u(N).sort=e),placeholder:"排序"},null,8,["value"])])),_:1}),d(a,{label:"备注",name:"remark"},{default:m((()=>[d(o,{style:{width:"100%"},value:u(N).remark,"onUpdate:value":t[3]||(t[3]=e=>u(N).remark=e),placeholder:"备注"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","open"])}}};export{j as default};
