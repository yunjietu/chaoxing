import t from"./do-reload-form-modal-DuStgHDn.js";import a from"./reload-result-list-Beo7nKNh.js";import{r as e}from"./reload-api-CHaGlhbP.js";import{s as o}from"./index-SeYMZHv7.js";import{_ as r}from"./index-C3kHkCVg.js";import{T as s}from"./table-id-const-CfofKxZg.js";import{r as i,e as l,b2 as n,z as d,ag as m,o as p,bz as u,c as j,ai as c,u as v,b as f,ah as y,y as b,J as g}from"./@vue-wTDZSr7R.js";import"./ant-design-vue-qdrtx42b.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-Dk7pxPyP.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const _=c("h4",null,"Smart-Reload 心跳服务介绍：",-1),h=c("pre",null,"简介：SmartReload是一个可以在不重启进程的情况下动态重新加载配置或者执行某些预先设置的代码。\n\n原理：\n- Java后端会在项目启动的时候开启一个Daemon线程，这个Daemon线程会每隔几秒轮询t_smart_item表的状态。\n- 如果【状态标识】与【上次状态标识】比较发生变化，会将参数传入SmartReload实现类，进行自定义操作。\n用途：\n· 用于刷新内存中的缓存\n· 用于执行某些后门代码\n· 用于进行Java热加载（前提是类结构不发生变化）\n· 其他不能重启服务的应用\n",-1),x={key:0,class:"smart-table-operate"},w={__name:"reload-list",setup(c){const w=i([{title:"标签",dataIndex:"tag",width:200},{title:"运行标识",dataIndex:"identification"},{title:"参数",dataIndex:"args"},{title:"更新时间",dataIndex:"updateTime",width:150},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:150}]),k=i(!1),I=i([]);async function R(){try{k.value=!0;let t=await e.queryList();I.value=t.data}catch(t){o.captureError(t)}finally{k.value=!1}}l(R);const z=i();const C=i();return(e,o)=>{const i=n("a-alert"),l=n("a-row"),c=n("a-button"),S=n("a-table"),D=n("a-card"),T=d("privilege");return p(),m(D,{size:"small",bordered:!1,hoverable:!0},{default:u((()=>[j(i,null,{message:u((()=>[_])),description:u((()=>[h])),_:1}),j(l,{justify:"end"},{default:u((()=>[j(r,{class:"smart-margin-bottom5 smart-margin-top5",modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=t=>w.value=t),tableId:v(s).SUPPORT.RELOAD,refresh:R},null,8,["modelValue","tableId"])])),_:1}),j(S,{size:"small",bordered:"",class:"smart-margin-top10",dataSource:I.value,loading:k.value,columns:w.value,rowKey:"tag",pagination:!1},{bodyCell:u((({record:t,column:a})=>["action"===a.dataIndex?(p(),f("div",x,[b((p(),m(c,{onClick:a=>{return e=t.tag,void z.value.showModal(e);var e},type:"link"},{default:u((()=>[g("执行")])),_:2},1032,["onClick"])),[[T,"support:reload:execute"]]),b((p(),m(c,{onClick:a=>{return e=t.tag,void C.value.showModal(e);var e},type:"link"},{default:u((()=>[g("查看结果")])),_:2},1032,["onClick"])),[[T,"support:reload:result"]])])):y("",!0)])),_:1},8,["dataSource","loading","columns"]),j(t,{onRefresh:R,ref_key:"doReloadForm",ref:z},null,512),j(a,{ref_key:"reloadResultList",ref:C},null,512)])),_:1})}}};export{w as default};
