import{_ as e,b as a}from"./enterprise-bank-operate-modal-CEhe7NJa.js";import{c as t,P as s,s as i,S as r}from"./index-SeYMZHv7.js";import{_ as l}from"./index-C3kHkCVg.js";import{T as o}from"./table-id-const-CfofKxZg.js";import{M as n,b as d}from"./ant-design-vue-qdrtx42b.js";import{r as u,a as p,w as m,b2 as c,b as f,o as g,c as b,bz as y,K as j,u as v,ag as h,ah as k,J as _,ai as I,F as w,be as x}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const S={key:2,class:"smart-table-operate"},z={class:"smart-query-table-page"},C={__name:"enterprise-bank-list",props:{enterpriseId:{type:Number,default:null}},setup(C){const N=C,T=u([{title:"开户银行",dataIndex:"bankName"},{title:"账户名称",dataIndex:"accountName",ellipsis:!0},{title:"账号",width:100,dataIndex:"accountNumber",ellipsis:!0},{title:"是否对公",width:120,dataIndex:"businessFlag"},{title:"状态",width:80,dataIndex:"disabledFlag"},{title:"备注",width:100,dataIndex:"remark"},{title:"创建人",width:100,dataIndex:"createUserName"},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:100}]),O={enterpriseId:N.enterpriseId,keywords:"",endTime:null,startTime:null,pageNum:1,pageSize:t,searchCount:!0},E=p({...O}),F=u(!1),U=u([]),q=u(0),P=u();let R=u();function $(e,a){E.startTime=a[0],E.endTime=a[1]}function A(){R.value=[],Object.assign(E,O,{enterpriseId:N.enterpriseId}),M()}function K(){E.pageNum=1,M()}async function M(){try{F.value=!0;let e=await a.pageQuery(E);const t=e.data.list;q.value=e.data.total,U.value=t}catch(e){i.captureError(e)}finally{F.value=!1}}function Q(e){n.confirm({title:"确定要删除吗？",content:"删除后，该信息将不可恢复",okText:"删除",okType:"danger",onOk(){!async function(e){try{r.show(),await a.delete(e),d.success("删除成功"),M()}catch(t){i.captureError(t)}finally{r.hide()}}(e)},cancelText:"取消",onCancel(){}})}function V(e){P.value.showModal(e)}return m((()=>N.enterpriseId),(e=>{e&&(E.enterpriseId=e,M())}),{immediate:!0}),(a,t)=>{const i=c("a-input"),r=c("a-form-item"),n=c("a-range-picker"),d=c("a-space"),u=c("SearchOutlined"),p=c("a-button"),m=c("ReloadOutlined"),N=c("a-button-group"),O=c("PlusOutlined"),F=c("a-row"),B=c("a-form"),J=c("a-table"),D=c("a-pagination"),L=c("a-card");return g(),f(w,null,[b(B,{class:"smart-query-form"},{default:y((()=>[b(F,{class:"smart-query-form-row"},{default:y((()=>[b(r,{label:"关键字",class:"smart-query-form-item"},{default:y((()=>[b(i,{style:{width:"300px"},value:E.keywords,"onUpdate:value":t[0]||(t[0]=e=>E.keywords=e),placeholder:"开户银行/账户名称/账户/创建人"},null,8,["value"])])),_:1}),b(r,{label:"创建时间",class:"smart-query-form-item"},{default:y((()=>[b(d,{direction:"vertical",size:12},{default:y((()=>[b(n,{value:v(R),"onUpdate:value":t[1]||(t[1]=e=>j(R)?R.value=e:R=e),onChange:$},null,8,["value"])])),_:1})])),_:1}),b(r,{class:"smart-query-form-item smart-margin-left10"},{default:y((()=>[b(N,null,{default:y((()=>[b(p,{type:"primary",onClick:K},{icon:y((()=>[b(u)])),default:y((()=>[_(" 查询 ")])),_:1}),b(p,{onClick:A},{icon:y((()=>[b(m)])),default:y((()=>[_(" 重置 ")])),_:1})])),_:1}),a.$privilege("oa:bank:add")?(g(),h(p,{key:0,onClick:t[2]||(t[2]=e=>V()),type:"primary",class:"smart-margin-left20"},{icon:y((()=>[b(O)])),default:y((()=>[_(" 新建账户 ")])),_:1})):k("",!0)])),_:1})])),_:1})])),_:1}),b(L,{size:"small",bordered:!1,hoverable:!1},{default:y((()=>[b(F,{justify:"end"},{default:y((()=>[b(l,{class:"smart-margin-bottom5",modelValue:T.value,"onUpdate:modelValue":t[3]||(t[3]=e=>T.value=e),tableId:v(o).BUSINESS.OA.ENTERPRISE_BANK,refresh:M},null,8,["modelValue","tableId"])])),_:1}),b(J,{scroll:{x:1300},size:"small",dataSource:U.value,bordered:"",columns:T.value,rowKey:"bankId",pagination:!1},{bodyCell:y((({record:e,column:t})=>["disabledFlag"===t.dataIndex?(g(),f(w,{key:0},[_(x(e.disabledFlag?"禁用":"启用"),1)],64)):"businessFlag"===t.dataIndex?(g(),f(w,{key:1},[_(x(e.businessFlag?"是":"否"),1)],64)):"action"===t.dataIndex?(g(),f("div",S,[a.$privilege("oa:bank:update")?(g(),h(p,{key:0,onClick:a=>V(e),type:"link"},{default:y((()=>[_("编辑")])),_:2},1032,["onClick"])):k("",!0),a.$privilege("oa:bank:delete")?(g(),h(p,{key:1,onClick:a=>Q(e.bankId),danger:"",type:"link"},{default:y((()=>[_("删除")])),_:2},1032,["onClick"])):k("",!0)])):k("",!0)])),_:1},8,["dataSource","columns"]),I("div",z,[b(D,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:v(s),defaultPageSize:E.pageSize,current:E.pageNum,"onUpdate:current":t[4]||(t[4]=e=>E.pageNum=e),pageSize:E.pageSize,"onUpdate:pageSize":t[5]||(t[5]=e=>E.pageSize=e),total:q.value,onChange:M,onShowSizeChange:M,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),b(e,{ref_key:"operateModal",ref:P,enterpriseId:C.enterpriseId,onReloadList:M},null,8,["enterpriseId"])])),_:1})],64)}}};export{C as default};
