import{_ as e}from"./lodash-DG05lPuJ.js";import{r as t}from"./role-api-BdA7V71d.js";import{_ as s,S as o,s as a}from"./index-SeYMZHv7.js";import r from"./index-MBTSqbDw.js";import{M as l,b as i}from"./ant-design-vue-qdrtx42b.js";import{r as n,e as m,m as p,b2 as d,z as u,b as c,o as j,c as y,bz as f,K as v,u as b,F as x,b0 as _,ag as g,J as h,be as k,ai as C,y as w}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const I={style:{display:"flex","flex-direction":"column"}},z=s({__name:"index",setup(s,{expose:z}){const E=n([]);async function K(){let s=await t.queryAll();E.value=s.data,!e.isEmpty(s.data)&&s.data[0].roleId&&(M.value=[s.data[0].roleId])}m(K);let M=n([]);const R=p((()=>!M.value&&e.isEmpty(M.value)?null:M.value[0])),T=n();function A(e){T.value.showModal(e)}return z({selectRoleId:R}),(e,s)=>{const n=d("a-button"),m=d("a-popover"),p=d("a-menu-item"),z=d("a-menu"),R=d("a-card"),F=u("privilege");return j(),c(x,null,[y(R,{title:"角色列表",class:"role-container",style:{padding:"0"}},{extra:f((()=>[w((j(),g(n,{type:"primary",size:"small",onClick:A},{default:f((()=>[h("添加")])),_:1})),[[F,"system:role:add"]])])),default:f((()=>[y(z,{mode:"vertical",selectedKeys:b(M),"onUpdate:selectedKeys":s[0]||(s[0]=e=>v(M)?M.value=e:M=e)},{default:f((()=>[(j(!0),c(x,null,_(E.value,(e=>(j(),g(p,{key:e.roleId},{default:f((()=>[y(m,{placement:"right"},{content:f((()=>[C("div",I,[w((j(),g(n,{type:"text",onClick:s=>{var r;(r=e.roleId)&&l.confirm({title:"提示",content:"确定要删除该角色么？",okText:"确定",okType:"danger",async onOk(){o.show();try{await t.deleteRole(r),i.info("删除成功"),K()}catch(e){a.captureError(e)}finally{o.hide()}},cancelText:"取消",onCancel(){}})}},{default:f((()=>[h("删除")])),_:2},1032,["onClick"])),[[F,"system:role:delete"]]),w((j(),g(n,{type:"text",onClick:t=>A(e)},{default:f((()=>[h("编辑")])),_:2},1032,["onClick"])),[[F,"system:role:update"]])])])),default:f((()=>[h(" "+k(e.roleName),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selectedKeys"])])),_:1}),y(r,{ref_key:"roleFormModal",ref:T,onRefresh:K},null,512)],64)}}},[["__scopeId","data-v-27fbe1fb"]]);export{z as default};
