import{P as e,s as t,S as a}from"./index-SeYMZHv7.js";import{p as o}from"./position-api-Cwzz9KIn.js";import{_ as s}from"./index-C3kHkCVg.js";import i from"./position-form-CWTnKDQR.js";import{_ as l}from"./lodash-DG05lPuJ.js";import{T as r}from"./table-id-const-CfofKxZg.js";import{b as n,M as p}from"./ant-design-vue-qdrtx42b.js";import{r as d,a as u,e as c,b2 as m,b as f,o as y,c as g,bz as j,J as v,ai as b,u as h,ah as k,F as w}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const _={class:"smart-table-operate-block"},S={class:"smart-table-setting-block"},x={key:0,class:"smart-table-operate"},z={class:"smart-query-table-page"},C={__name:"position-list",setup(C){const I=d([{title:"职务名称",dataIndex:"positionName",ellipsis:!0},{title:"职级",dataIndex:"positionLevel",ellipsis:!0},{title:"排序",dataIndex:"sort",ellipsis:!0},{title:"备注",dataIndex:"remark",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",ellipsis:!0},{title:"操作",dataIndex:"action",fixed:"right",width:90}]),O={keywords:void 0,pageNum:1,pageSize:10},E=u({...O}),T=d(!1),q=d([]),P=d(0);function N(){let e=E.pageSize;Object.assign(E,O),E.pageSize=e,R()}async function R(){T.value=!0;try{let e=await o.queryPage(E);q.value=e.data.list,P.value=e.data.total}catch(e){t.captureError(e)}finally{T.value=!1}}c(R);const U=d();function D(e){U.value.show(e)}function L(e){p.confirm({title:"提示",content:"确定要删除选吗?",okText:"删除",okType:"danger",onOk(){!async function(e){a.show();try{await o.delete(e.positionId),n.success("删除成功"),R()}catch(s){t.captureError(s)}finally{a.hide()}}(e)},cancelText:"取消",onCancel(){}})}const M=d([]);function V(e){M.value=e}function J(){l.isEmpty(M.value)?n.success("请选择要删除的数据"):p.confirm({title:"提示",content:"确定要批量删除这些数据吗?",okText:"删除",okType:"danger",onOk(){!async function(){try{a.show(),await o.batchDelete(M.value),n.success("删除成功"),R()}catch(e){t.captureError(e)}finally{a.hide()}}()},cancelText:"取消",onCancel(){}})}return(t,a)=>{const o=m("a-input"),l=m("a-form-item"),n=m("SearchOutlined"),p=m("a-button"),d=m("ReloadOutlined"),u=m("a-row"),c=m("a-form"),C=m("PlusOutlined"),O=m("DeleteOutlined"),K=m("a-table"),Q=m("a-pagination"),Y=m("a-card");return y(),f(w,null,[g(c,{class:"smart-query-form"},{default:j((()=>[g(u,{class:"smart-query-form-row"},{default:j((()=>[g(l,{label:"关键字查询",class:"smart-query-form-item"},{default:j((()=>[g(o,{style:{width:"200px"},value:E.keywords,"onUpdate:value":a[0]||(a[0]=e=>E.keywords=e),placeholder:"关键字查询"},null,8,["value"])])),_:1}),g(l,{class:"smart-query-form-item"},{default:j((()=>[g(p,{type:"primary",onClick:R},{icon:j((()=>[g(n)])),default:j((()=>[v(" 查询 ")])),_:1}),g(p,{onClick:N,class:"smart-margin-left10"},{icon:j((()=>[g(d)])),default:j((()=>[v(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1}),g(Y,{size:"small",bordered:!1,hoverable:!0},{default:j((()=>[g(u,{class:"smart-table-btn-block"},{default:j((()=>[b("div",_,[g(p,{onClick:D,type:"primary"},{icon:j((()=>[g(C)])),default:j((()=>[v(" 新建 ")])),_:1}),g(p,{onClick:J,type:"primary",danger:"",disabled:0===M.value.length},{icon:j((()=>[g(O)])),default:j((()=>[v(" 批量删除 ")])),_:1},8,["disabled"])]),b("div",S,[g(s,{modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value=e),tableId:h(r).SYSTEM.EMPLOYEE,refresh:R},null,8,["modelValue","tableId"])])])),_:1}),g(K,{size:"small",dataSource:q.value,columns:I.value,rowKey:"positionId",bordered:"",loading:T.value,pagination:!1,"row-selection":{selectedRowKeys:M.value,onChange:V}},{bodyCell:j((({text:e,record:t,column:a})=>["action"===a.dataIndex?(y(),f("div",x,[g(p,{onClick:e=>D(t),type:"link"},{default:j((()=>[v("编辑")])),_:2},1032,["onClick"]),g(p,{onClick:e=>L(t),danger:"",type:"link"},{default:j((()=>[v("删除")])),_:2},1032,["onClick"])])):k("",!0)])),_:1},8,["dataSource","columns","loading","row-selection"]),b("div",z,[g(Q,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:h(e),defaultPageSize:E.pageSize,current:E.pageNum,"onUpdate:current":a[2]||(a[2]=e=>E.pageNum=e),pageSize:E.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>E.pageSize=e),total:P.value,onChange:R,onShowSizeChange:R,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),g(i,{ref_key:"formRef",ref:U,onReloadList:R},null,512)])),_:1})],64)}}};export{C as default};
