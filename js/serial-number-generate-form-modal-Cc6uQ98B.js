import{s as e}from"./serial-number-api-DsvNt-r8.js";import{S as a,s as t}from"./index-SeYMZHv7.js";import{_ as s}from"./lodash-DG05lPuJ.js";import{b as l}from"./ant-design-vue-qdrtx42b.js";import{r,a as o,b2 as u,ag as i,o as m,bz as n,c as p}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const d={__name:"serial-number-generate-form-modal",emits:["refresh"],setup(d,{expose:v,emit:b}){const f=b;v({showModal:function(e){_.serialNumberId=e.serialNumberId,_.businessName=e.businessName,_.format=e.format,_.ruleType=e.ruleType,_.lastNumber=e.lastNumber,_.count=1,N.value="",j.value=!0}});const j=r(!1);function c(){j.value=!1,f("refresh")}const y={count:[{required:!0,message:"请输入数量"}]},N=r(""),h=r(),_=o({serialNumberId:-1,businessName:"",format:"",ruleType:"",lastNumber:-1,count:1});function g(){h.value.validate().then((async()=>{a.show();try{let a=await e.generate(_);l.success("生成成功"),N.value=s.join(a.data,", ")}catch(r){t.captureError(r)}finally{a.hide()}})).catch((e=>{l.error("参数验证错误，请仔细填写表单数据!")}))}return(e,a)=>{const t=u("a-input"),s=u("a-form-item"),l=u("a-input-number"),r=u("a-textarea"),o=u("a-form"),d=u("a-modal");return m(),i(d,{open:j.value,title:"生成单号","ok-text":"生成","cancel-text":"关闭",onOk:g,onCancel:c},{default:n((()=>[p(o,{ref_key:"formRef",ref:h,model:_,rules:y,"label-col":{span:5}},{default:n((()=>[p(s,{label:"业务"},{default:n((()=>[p(t,{value:_.businessName,"onUpdate:value":a[0]||(a[0]=e=>_.businessName=e),disabled:!0},null,8,["value"])])),_:1}),p(s,{label:"格式"},{default:n((()=>[p(t,{value:_.format,"onUpdate:value":a[1]||(a[1]=e=>_.format=e),disabled:!0},null,8,["value"])])),_:1}),p(s,{label:"循环周期"},{default:n((()=>[p(t,{value:_.ruleType,"onUpdate:value":a[2]||(a[2]=e=>_.ruleType=e),disabled:!0},null,8,["value"])])),_:1}),p(s,{label:"上次产生单号"},{default:n((()=>[p(t,{value:_.lastNumber,"onUpdate:value":a[3]||(a[3]=e=>_.lastNumber=e),disabled:!0},null,8,["value"])])),_:1}),p(s,{label:"生成数量",name:"count"},{default:n((()=>[p(l,{value:_.count,"onUpdate:value":a[4]||(a[4]=e=>_.count=e)},null,8,["value"])])),_:1}),p(s,{label:"生成结果"},{default:n((()=>[p(r,{value:N.value,"onUpdate:value":a[5]||(a[5]=e=>N.value=e),rows:2},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open"])}}};export{d as default};
