import{_ as e}from"./lodash-DG05lPuJ.js";import{S as a,s as t}from"./index-SeYMZHv7.js";import{c as l}from"./change-log-api-CWeFw9qD.js";import o from"./index-DPBcXeae.js";import{b as s}from"./ant-design-vue-qdrtx42b.js";import{r as i,a as r,b2 as n,ag as u,o as p,bz as d,c as m,u as c,J as v,n as j}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const h={__name:"change-log-form",emits:["reloadList"],setup(h,{expose:f,emit:b}){const y=b,g=i(!1);function _(){Object.assign(x,k),g.value=!1}const w=i(),k={changeLogId:void 0,updateVersion:void 0,type:void 0,publishAuthor:void 0,publicDate:void 0,content:void 0,link:void 0};let x=r({...k});const C={updateVersion:[{required:!0,message:"版本 必填"}],type:[{required:!0,message:"更新类型:[1:特大版本功能更新;2:功能更新;3:bug修复] 必填"}],publishAuthor:[{required:!0,message:"发布人 必填"}],publicDate:[{required:!0,message:"发布日期 必填"}],content:[{required:!0,message:"更新内容 必填"}]};async function D(){try{await w.value.validateFields(),async function(){a.show();try{x.changeLogId?await l.update(x):await l.add(x),s.success("操作成功"),y("reloadList"),_()}catch(e){t.captureError(e)}finally{a.hide()}}()}catch(e){s.error("参数验证错误，请仔细填写表单数据!")}}return f({show:function(a){Object.assign(x,k),a&&!e.isEmpty(a)&&Object.assign(x,a),g.value=!0,j((()=>{w.value.clearValidate()}))}}),(e,a)=>{const t=n("a-input"),l=n("a-form-item"),s=n("a-date-picker"),i=n("a-textarea"),r=n("a-form"),j=n("a-button"),h=n("a-space"),f=n("a-modal");return p(),u(f,{title:c(x).changeLogId?"编辑":"添加",width:"600px",closable:!0,open:g.value,onClose:_,onCancel:_,maskClosable:!1,destroyOnClose:!0},{footer:d((()=>[m(h,null,{default:d((()=>[m(j,{onClick:_},{default:d((()=>[v("取消")])),_:1}),m(j,{type:"primary",onClick:D},{default:d((()=>[v("保存")])),_:1})])),_:1})])),default:d((()=>[m(r,{ref_key:"formRef",ref:w,model:c(x),rules:C,"label-col":{span:5}},{default:d((()=>[m(l,{label:"版本",name:"updateVersion"},{default:d((()=>[m(t,{style:{width:"100%"},value:c(x).updateVersion,"onUpdate:value":a[0]||(a[0]=e=>c(x).updateVersion=e),placeholder:"版本"},null,8,["value"])])),_:1}),m(l,{label:"更新类型",name:"type"},{default:d((()=>[m(o,{width:"100%",value:c(x).type,"onUpdate:value":a[1]||(a[1]=e=>c(x).type=e),enumName:"CHANGE_LOG_TYPE_ENUM",placeholder:"更新类型"},null,8,["value"])])),_:1}),m(l,{label:"发布人",name:"publishAuthor"},{default:d((()=>[m(t,{style:{width:"100%"},value:c(x).publishAuthor,"onUpdate:value":a[2]||(a[2]=e=>c(x).publishAuthor=e),placeholder:"发布人"},null,8,["value"])])),_:1}),m(l,{label:"发布日期",name:"publicDate"},{default:d((()=>[m(s,{valueFormat:"YYYY-MM-DD",value:c(x).publicDate,"onUpdate:value":a[3]||(a[3]=e=>c(x).publicDate=e),style:{width:"100%"},placeholder:"发布日期"},null,8,["value"])])),_:1}),m(l,{label:"跳转链接",name:"link"},{default:d((()=>[m(t,{style:{width:"100%"},value:c(x).link,"onUpdate:value":a[4]||(a[4]=e=>c(x).link=e),placeholder:"跳转链接"},null,8,["value"])])),_:1}),m(l,{label:"更新内容",name:"content"},{default:d((()=>[m(i,{style:{width:"100%"},rows:15,value:c(x).content,"onUpdate:value":a[5]||(a[5]=e=>c(x).content=e),placeholder:"更新内容"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","open"])}}};export{h as default};
