import{_ as e,i as a}from"./enterprise-invoice-operate-modal-1KnO1rNS.js";import{c as t,P as i,s,S as l}from"./index-SeYMZHv7.js";import{_ as r}from"./index-C3kHkCVg.js";import{T as o}from"./table-id-const-CfofKxZg.js";import{M as n,b as d}from"./ant-design-vue-qdrtx42b.js";import{r as u,a as p,w as m,b2 as c,b as f,o as v,c as y,bz as g,K as j,u as b,ag as h,ah as I,J as _,ai as w,F as k,be as x}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const S={key:1,class:"smart-table-operate"},z={class:"smart-query-table-page"},C={__name:"enterprise-invoice-list",props:{enterpriseId:{type:Number,default:null}},setup(C){const N=C,O=u([{title:"ID",width:50,dataIndex:"invoiceId"},{title:"开票抬头",dataIndex:"invoiceHeads",ellipsis:!0},{title:"纳税人识别号",dataIndex:"taxpayerIdentificationNumber",ellipsis:!0},{title:"银行账号",width:100,dataIndex:"accountNumber",ellipsis:!0},{title:"开户行",width:120,dataIndex:"bankName"},{title:"状态",width:80,dataIndex:"disabledFlag"},{title:"备注",width:100,dataIndex:"remark"},{title:"创建人",width:100,dataIndex:"createUserName"},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:100}]),T={enterpriseId:N.enterpriseId,keywords:"",endTime:null,startTime:null,pageNum:1,pageSize:t,searchCount:!0},E=p({...T}),U=u(!1),q=u([]),P=u(0),F=u();let R=u();function V(e,a){E.startTime=a[0],E.endTime=a[1]}function $(){R.value=[],Object.assign(E,T),Q()}function M(){E.pageNum=1,Q()}async function Q(){try{U.value=!0;let e=await a.pageQuery(E);const t=e.data.list;P.value=e.data.total,q.value=t}catch(e){s.captureError(e)}finally{U.value=!1}}function A(e){n.confirm({title:"确定要删除吗？",content:"删除后，该信息将不可恢复",okText:"删除",okType:"danger",onOk(){!async function(e){try{l.show(),await a.delete(e),d.success("删除成功"),Q()}catch(t){s.captureError(t)}finally{l.hide()}}(e)},cancelText:"取消",onCancel(){}})}function D(e){F.value.showModal(e)}return m((()=>N.enterpriseId),(e=>{e&&(E.enterpriseId=e,Q())}),{immediate:!0}),(a,t)=>{const s=c("a-input"),l=c("a-form-item"),n=c("a-range-picker"),d=c("a-space"),u=c("SearchOutlined"),p=c("a-button"),m=c("ReloadOutlined"),N=c("a-button-group"),T=c("PlusOutlined"),U=c("a-row"),J=c("a-form"),K=c("a-table"),B=c("a-pagination"),H=c("a-card");return v(),f(k,null,[y(J,{class:"smart-query-form"},{default:g((()=>[y(U,{class:"smart-query-form-row"},{default:g((()=>[y(l,{label:"关键字",class:"smart-query-form-item"},{default:g((()=>[y(s,{style:{width:"300px"},value:E.keywords,"onUpdate:value":t[0]||(t[0]=e=>E.keywords=e),placeholder:"开票抬头/银行账户/创建人"},null,8,["value"])])),_:1}),y(l,{label:"创建时间",class:"smart-query-form-item"},{default:g((()=>[y(d,{direction:"vertical",size:12},{default:g((()=>[y(n,{value:b(R),"onUpdate:value":t[1]||(t[1]=e=>j(R)?R.value=e:R=e),onChange:V},null,8,["value"])])),_:1})])),_:1}),y(l,{class:"smart-query-form-item smart-margin-left10"},{default:g((()=>[y(N,null,{default:g((()=>[y(p,{type:"primary",onClick:M},{icon:g((()=>[y(u)])),default:g((()=>[_(" 查询 ")])),_:1}),y(p,{onClick:$},{icon:g((()=>[y(m)])),default:g((()=>[_(" 重置 ")])),_:1})])),_:1}),a.$privilege("oa:invoice:add")?(v(),h(p,{key:0,onClick:t[2]||(t[2]=e=>D()),type:"primary",class:"smart-margin-left20"},{icon:g((()=>[y(T)])),default:g((()=>[_(" 新建发票 ")])),_:1})):I("",!0)])),_:1})])),_:1})])),_:1}),y(H,{size:"small",bordered:!1,hoverable:!1},{default:g((()=>[y(U,{justify:"end"},{default:g((()=>[y(r,{class:"smart-margin-bottom5",modelValue:O.value,"onUpdate:modelValue":t[3]||(t[3]=e=>O.value=e),tableId:b(o).BUSINESS.OA.ENTERPRISE_INVOICE,refresh:Q},null,8,["modelValue","tableId"])])),_:1}),y(K,{scroll:{x:1300},size:"small",dataSource:q.value,columns:O.value,rowKey:"invoiceId",pagination:!1,bordered:""},{bodyCell:g((({record:e,column:t})=>["disabledFlag"===t.dataIndex?(v(),f(k,{key:0},[_(x(e.disabledFlag?"禁用":"启用"),1)],64)):"action"===t.dataIndex?(v(),f("div",S,[a.$privilege("oa:invoice:update")?(v(),h(p,{key:0,onClick:a=>D(e),type:"link"},{default:g((()=>[_("编辑")])),_:2},1032,["onClick"])):I("",!0),a.$privilege("oa:invoice:delete")?(v(),h(p,{key:1,onClick:a=>A(e.invoiceId),type:"link",danger:""},{default:g((()=>[_("删除")])),_:2},1032,["onClick"])):I("",!0)])):I("",!0)])),_:1},8,["dataSource","columns"]),w("div",z,[y(B,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:b(i),defaultPageSize:E.pageSize,current:E.pageNum,"onUpdate:current":t[4]||(t[4]=e=>E.pageNum=e),pageSize:E.pageSize,"onUpdate:pageSize":t[5]||(t[5]=e=>E.pageSize=e),total:P.value,onChange:Q,onShowSizeChange:Q,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),y(e,{ref_key:"operateModal",ref:F,enterpriseId:C.enterpriseId,onReloadList:Q},null,8,["enterpriseId"])])),_:1})],64)}}};export{C as default};
