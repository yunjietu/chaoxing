import{_ as e}from"./lodash-DG05lPuJ.js";import{_ as t,s,N as a}from"./index-SeYMZHv7.js";import{d as i}from"./department-api-IZzKtGZG.js";import{r,m as o,w as l,e as n,b2 as d,b as m,o as p,ai as c,c as u,bz as v,aP as j,be as y,F as f,b0 as b}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./ant-design-vue-qdrtx42b.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-Dk7pxPyP.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const h={class:"wrapper"},w={class:"sider-fl"},I={class:"list-item-title"},k={class:"sider-fr"},C={class:"selected-list"},g={class:"list-item-title"},x=t({__name:"notice-form-visible-transfer-department",props:{departmentList:{type:Array,default:()=>[]}},emits:["onChange"],setup(t,{emit:x}){const N=t,_=x,E=r([]);async function T(){try{const t=await i.queryDepartmentTree();e.isEmpty(t.data)||(E.value=t.data,z.value=[E.value[0].departmentId])}catch(t){s.captureError(t)}}const z=r([]);const D=r([]),K=o((()=>D.value.map((e=>e.dataId))));function L(e){return K.value.includes(e)}function A(){_("onChange",{selectedList:D.value,selectedIds:K.value})}return l((()=>N.departmentList),(e=>{D.value=e}),{immediate:!0}),n((()=>{T()})),(e,t)=>{const s=d("caret-down-outlined"),i=d("check-circle-filled"),r=d("a-tree"),o=d("close-circle-two-tone");return p(),m("div",h,[c("div",w,[u(r,{"tree-data":E.value,fieldNames:{title:"departmentName",key:"departmentId"},selectable:!1,expandedKeys:z.value,"onUpdate:expandedKeys":t[0]||(t[0]=e=>z.value=e)},{switcherIcon:v((({switcherCls:e})=>[u(s,{class:j(e)},null,8,["class"])])),title:v((({departmentName:e,departmentId:t})=>[c("div",{class:j(["list-item",{active:L(t)}])},[c("div",I,y(e),1),u(i,{class:"check-icon-style",onClick:s=>function(e,t){L(t)||(D.value.push({dataName:e,dataId:t,dataType:a.DEPARTMENT.value}),A())}(e,t)},null,8,["onClick"])],2)])),_:1},8,["tree-data","expandedKeys"])]),c("div",k,[c("div",C,[(p(!0),m(f,null,b(D.value,((e,t)=>(p(),m("div",{class:"list-item",key:e.dataId},[c("div",g,y(e.dataName),1),u(o,{onClick:e=>function(e){D.value.splice(e,1),A()}(t)},null,8,["onClick"])])))),128))])])])}}},[["__scopeId","data-v-5d64d322"]]);export{x as default};
