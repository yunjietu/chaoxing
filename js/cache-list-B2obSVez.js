import{b as a,s as e,S as t}from"./index-SeYMZHv7.js";import{_ as s}from"./lodash-DG05lPuJ.js";import{b as r,M as o}from"./ant-design-vue-qdrtx42b.js";import{a as i,r as n,e as c,b2 as p,z as l,ag as m,o as u,bz as d,c as j,ai as y,b as f,ah as h,y as v,J as b,h as k}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";
/*
 * 缓存
 *
 * @Author:    罗伊
 * @Date:      2022-09-03 21:51:34
 * @Wechat:    zhuda1024
 * @Email:     lab1024@163.com
 * @Copyright  1024创新实验室 （ https://1024lab.net ），Since 2012
 */const g=e=>a(`/support/cache/keys/${e}`),C=e=>a(`/support/cache/remove/${e}`),w=()=>a("/support/cache/names"),x=y("h4",null,"缓存 介绍：",-1),S=y("pre",null,"简介：SmartAdmin使用的是SpringCache进行管理缓存，SpringCache有多种实现方式，本项目默认采用的是caffeine。\nCaffeine ：\n- Caffeine是一个进程内部缓存框架，使用了Java 8最新的[StampedLock]乐观锁技术，极大提高缓存并发吞吐量，一个高性能的 Java 缓存库，被称为最快缓存。\n其他：\n· 对于分布式、集群等应用实现方式可以改为 Redis、CouchBase等\n",-1),_={key:0,class:"smart-table-operate"},z={__name:"cache-list",setup(a){const y=i([{title:"Key",dataIndex:"key"},{title:"操作",dataIndex:"action",fixed:"right",width:160}]),z=n(!1),E=n([]);async function I(){try{z.value=!0;let a=await w();E.value=a.data.map((a=>Object.assign({},{key:a})))}catch(a){e.captureError(a)}finally{z.value=!1}}return c(I),(a,i)=>{const n=p("a-alert"),c=p("a-button"),w=p("a-table"),z=p("a-card"),J=l("privilege");return u(),m(z,{size:"small",bordered:!1,hoverable:!0},{default:d((()=>[j(n,null,{message:d((()=>[x])),description:d((()=>[S])),_:1}),j(w,{size:"small",bordered:"",class:"smart-margin-top10",dataSource:E.value,columns:y,rowKey:"tag",pagination:!1},{bodyCell:d((({record:a,column:i})=>["action"===i.dataIndex?(u(),f("div",_,[v((u(),m(c,{onClick:t=>async function(a){try{await C(a),r.success("删除成功"),I()}catch(t){e.captureError(t)}}(a.key),type:"link"},{default:d((()=>[b("清除")])),_:2},1032,["onClick"])),[[J,"support:cache:delete"]]),v((u(),m(c,{onClick:r=>async function(a){t.show();try{let e=await g(a);t.hide(),o.info({title:"所有Key:"+a,content:k("div",{},[k("p",s.join(e.data," , "))]),onOk(){I()}})}catch(r){e.captureError(r)}finally{t.hide()}}(a.key),type:"link"},{default:d((()=>[b("获取所有key")])),_:2},1032,["onClick"])),[[J,"support:cache:keys"]])])):h("",!0)])),_:1},8,["dataSource","columns"])])),_:1})}}};export{z as default};
