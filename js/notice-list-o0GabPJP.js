import{a as e,r as t,e as a,b2 as l,z as i,b as o,o as s,y as r,c as n,ag as d,bz as u,F as m,b0 as c,J as p,be as f,u as y,ai as v,ah as h,E as g}from"./@vue-wTDZSr7R.js";import{u as b}from"./vue-router-BJIyZwNj.js";import{c as j,s as w,P as x}from"./index-SeYMZHv7.js";import _ from"./index-Br4j2Q_F.js";import{n as I}from"./notice-api-CJupa0Sd.js";import k from"./notice-form-drawer-Dn1_b_2h.js";import{d as N}from"./default-time-ranges-C0dlfVG_.js";import{_ as S}from"./index-C3kHkCVg.js";import{T as C}from"./table-id-const-CfofKxZg.js";import{M as T,b as z}from"./ant-design-vue-qdrtx42b.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./index-CtS3x09i.js";import"./@wangeditor-next-BWE1cd2r.js";import"./notice-form-visible-modal-DnXkdJ15.js";import"./notice-form-visible-transfer-department-CkBBxJvP.js";import"./department-api-IZzKtGZG.js";import"./notice-form-visible-transfer-employee-OCOPrTju.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const U={class:"smart-table-operate-block"},q={class:"smart-table-setting-block"},F=["onClick"],E={key:0,class:"smart-table-operate"},O={class:"smart-query-table-page"},V={__name:"notice-list",setup(V){const B={noticeTypeId:void 0,keywords:"",documentNumber:"",createUserName:void 0,deletedFlag:void 0,createTimeBegin:null,createTimeEnd:null,publishTimeBegin:null,publishTimeEnd:null,pageNum:1,pageSize:j},P=e({...B}),A=t([{title:"标题",dataIndex:"title",width:300,ellipsis:!0},{title:"文号",dataIndex:"documentNumber",width:100,ellipsis:!0},{title:"分类",dataIndex:"noticeTypeName",width:60,ellipsis:!0},{title:"作者",dataIndex:"author",width:80,ellipsis:!0},{title:"来源",dataIndex:"source",width:90,ellipsis:!0},{title:"可见范围",dataIndex:"allVisibleFlag",width:90,ellipsis:!0},{title:"发布状态",dataIndex:"publishFlag",width:80},{title:"删除",dataIndex:"deletedFlag",width:80},{title:"发布时间",dataIndex:"publishTime",width:150},{title:"页面浏览量",dataIndex:"pageViewCount",width:90},{title:"用户浏览量",dataIndex:"userViewCount",width:90},{title:"创建人",dataIndex:"createUserName",width:80},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:90}]),M=t([]);const D=t([]),J=t(0),L=t(!1);async function Q(){try{L.value=!0;const e=await I.queryNotice(P);D.value=e.data.list,J.value=e.data.total}catch(e){w.captureError(e)}finally{L.value=!1}}function R(){P.pageNum=1,Q()}function $(){Object.assign(P,B),K.value=[],G.value=[],Q()}a((()=>{!async function(){try{const e=await I.getAllNoticeTypeList();M.value=e.data}catch(e){w.captureError(e)}}(),Q()}));const K=t([]);function X(e,t){P.publishTimeBegin=t[0],P.publishTimeEnd=t[1]}const G=t([]);function H(e,t){P.createTimeBegin=t[0],P.createTimeEnd=t[1]}const W=t();function Y(e){W.value.showModal(e)}function Z(e){T.confirm({title:"提示",content:"确认删除此数据吗?",onOk(){!async function(e){try{L.value=!0,await I.deleteNotice(e),z.success("删除成功"),Q()}catch(t){w.captureError(t)}finally{L.value=!1}}(e)}})}const ee=b();return(e,t)=>{const a=l("a-select-option"),b=l("a-select"),j=l("a-form-item"),w=l("a-input"),I=l("a-range-picker"),T=l("SearchOutlined"),z=l("a-button"),V=l("ReloadOutlined"),B=l("a-button-group"),te=l("a-row"),ae=l("a-form"),le=l("PlusOutlined"),ie=l("a-tag"),oe=l("a-table"),se=l("a-pagination"),re=l("a-card"),ne=i("privilege");return s(),o(m,null,[r((s(),d(ae,{class:"smart-query-form"},{default:u((()=>[n(te,{class:"smart-query-form-row"},{default:u((()=>[n(j,{label:"分类",class:"smart-query-form-item"},{default:u((()=>[n(b,{value:P.noticeTypeId,"onUpdate:value":t[0]||(t[0]=e=>P.noticeTypeId=e),style:{width:"100px"},showSearch:!0,allowClear:!0,placeholder:"分类"},{default:u((()=>[(s(!0),o(m,null,c(M.value,(e=>(s(),d(a,{key:e.noticeTypeId,value:e.noticeTypeId},{default:u((()=>[p(f(e.noticeTypeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),n(j,{label:"关键字",class:"smart-query-form-item"},{default:u((()=>[n(w,{style:{width:"300px"},value:P.keywords,"onUpdate:value":t[1]||(t[1]=e=>P.keywords=e),placeholder:"标题、作者、来源"},null,8,["value"])])),_:1}),n(j,{label:"文号",class:"smart-query-form-item"},{default:u((()=>[n(w,{style:{width:"150px"},value:P.documentNumber,"onUpdate:value":t[2]||(t[2]=e=>P.documentNumber=e),placeholder:"文号"},null,8,["value"])])),_:1}),n(j,{label:"创建人",class:"smart-query-form-item"},{default:u((()=>[n(w,{style:{width:"100px"},value:P.createUserName,"onUpdate:value":t[3]||(t[3]=e=>P.createUserName=e),placeholder:"创建人"},null,8,["value"])])),_:1}),n(j,{label:"是否删除",class:"smart-query-form-item"},{default:u((()=>[n(_,{value:P.deletedFlag,"onUpdate:value":t[4]||(t[4]=e=>P.deletedFlag=e),style:{width:"70px"}},null,8,["value"])])),_:1}),n(j,{label:"发布时间",class:"smart-query-form-item"},{default:u((()=>[n(I,{value:K.value,"onUpdate:value":t[5]||(t[5]=e=>K.value=e),presets:y(N),onChange:X,style:{width:"220px"}},null,8,["value","presets"])])),_:1}),n(j,{label:"创建时间",class:"smart-query-form-item"},{default:u((()=>[n(I,{value:G.value,"onUpdate:value":t[6]||(t[6]=e=>G.value=e),presets:y(N),onChange:H,style:{width:"220px"}},null,8,["value","presets"])])),_:1}),n(j,{class:"smart-query-form-item smart-margin-left10"},{default:u((()=>[n(B,null,{default:u((()=>[n(z,{type:"primary",onClick:R},{icon:u((()=>[n(T)])),default:u((()=>[p(" 查询 ")])),_:1}),n(z,{onClick:$},{icon:u((()=>[n(V)])),default:u((()=>[p(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),[[ne,"oa:notice:query"]]),n(re,{size:"small",bordered:!1},{default:u((()=>[n(te,{class:"smart-table-btn-block"},{default:u((()=>[v("div",U,[r((s(),d(z,{type:"primary",onClick:t[7]||(t[7]=e=>Y())},{icon:u((()=>[n(le)])),default:u((()=>[p(" 新建 ")])),_:1})),[[ne,"oa:notice:add"]])]),v("div",q,[n(S,{modelValue:A.value,"onUpdate:modelValue":t[8]||(t[8]=e=>A.value=e),tableId:y(C).BUSINESS.OA.NOTICE,refresh:Q},null,8,["modelValue","tableId"])])])),_:1}),n(oe,{rowKey:"noticeId",columns:A.value,dataSource:D.value,scroll:{x:1510},pagination:!1,loading:L.value,size:"small",bordered:""},{bodyCell:u((({column:e,record:t,text:a})=>["title"===e.dataIndex?(s(),o("a",{key:0,onClick:e=>{return a=t.noticeId,void ee.push({path:"/oa/notice/notice-detail",query:{noticeId:a}});var a}},f(a),9,F)):h("",!0),"documentNumber"===e.dataIndex?(s(),o(m,{key:1},[p(f(a||"无"),1)],64)):"allVisibleFlag"===e.dataIndex?(s(),o(m,{key:2},[p(f(a?"全部可见":"部分可见"),1)],64)):"publishFlag"===e.dataIndex?(s(),o(m,{key:3},[p(f(a?"已发布":"待发布"),1)],64)):"deletedFlag"===e.dataIndex?(s(),o(m,{key:4},[r(n(ie,{color:"error"},{default:u((()=>[p("已删除")])),_:2},1536),[[g,a]]),r(n(ie,{color:"success"},{default:u((()=>[p("未删除")])),_:2},1536),[[g,!a]])],64)):"action"===e.dataIndex?(s(),o(m,{key:5},[t.deletedFlag?h("",!0):(s(),o("div",E,[r((s(),d(z,{type:"link",onClick:e=>Y(t.noticeId)},{default:u((()=>[p("编辑")])),_:2},1032,["onClick"])),[[ne,"oa:notice:update"]]),r((s(),d(z,{type:"link",onClick:e=>Z(t.noticeId),danger:""},{default:u((()=>[p("删除")])),_:2},1032,["onClick"])),[[ne,"oa:notice:delete"]])]))],64)):h("",!0)])),_:1},8,["columns","dataSource","loading"]),v("div",O,[n(se,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:y(x),defaultPageSize:P.pageSize,current:P.pageNum,"onUpdate:current":t[9]||(t[9]=e=>P.pageNum=e),pageSize:P.pageSize,"onUpdate:pageSize":t[10]||(t[10]=e=>P.pageSize=e),total:J.value,onChange:Q,onShowSizeChange:Q,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1}),n(k,{ref_key:"noticeFormDrawer",ref:W,onReloadList:Q},null,512)],64)}}};export{V as default};
