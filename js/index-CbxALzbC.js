import{_ as e}from"./lodash-DG05lPuJ.js";import t from"./role-tree-checkbox-6XItwAx4.js";import{p as s,b as r,_ as i,S as a,s as o}from"./index-SeYMZHv7.js";import{u as m}from"./role-tree-menu-_8gSq8w5.js";import{b as p}from"./ant-design-vue-qdrtx42b.js";import{r as n,i as l,w as u,b2 as d,z as j,b as c,o as v,ai as y,c as f,y as b,ah as h,u as g,ag as w,bz as x,J as _,aY as k,aW as E}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./role-tree-point-Cr7Tuzjj.js";
/*
 * 角色菜单
 *
 * @Author:    1024创新实验室-主任：卓大
 * @Date:      2022-09-03 22:00:49
 * @Wechat:    zhuda1024
 * @Email:     lab1024@163.com
 * @Copyright  1024创新实验室 （ https://1024lab.net ），Since 2012
 */const I=e=>r(`role/menu/getRoleSelectedMenu/${e}`),M=e=>s("role/menu/updateRoleMenu",e),z={class:"tree-header"},C=(e=>(k("data-v-16d7d71d"),e=e(),E(),e))((()=>y("p",null,"设置角色对应的功能操作、后台管理权限",-1))),D=i({__name:"index",setup(s){let r=m(),i=n(),k=l("selectRoleId");async function E(){let t=r.checkedData;if(e.isEmpty(t))return void p.error("还未选择任何权限");let s={roleId:k.value,menuIdList:t};a.show();try{await M(s),p.success("保存成功")}catch(i){o.captureError(i)}finally{a.hide()}}return u(k,(()=>async function(){if(!k.value)return;let t=(await I(k.value)).data;e.isEmpty(r.treeMap)&&r.initTreeMap(t.menuTreeList||[]);r.initCheckedData(t.selectedMenuId||[]),i.value=t.menuTreeList}()),{immediate:!0}),(e,s)=>{const r=d("a-button"),a=j("privilege");return v(),c("div",null,[y("div",z,[C,g(k)?b((v(),w(r,{key:0,type:"primary",onClick:E},{default:x((()=>[_(" 保存 ")])),_:1})),[[a,"system:role:menu:update"]]):h("",!0)]),f(t,{tree:g(i)},null,8,["tree"])])}}},[["__scopeId","data-v-16d7d71d"]]);export{D as default};
