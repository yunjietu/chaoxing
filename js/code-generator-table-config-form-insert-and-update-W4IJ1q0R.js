import{i as e,r as a,a as t,m as l,b2 as n,b as r,o as d,c as o,ag as s,ah as i,bz as u,y as p,J as m,u as c,be as g,E as f,ai as y,F as v,b0 as h,aY as j,aW as F}from"./@vue-wTDZSr7R.js";import{h as b,d as x}from"./code-generator-util-BIgdvUgd.js";import{_ as U,l as I,m as _}from"./index-SeYMZHv7.js";import k from"./index-DPBcXeae.js";import{b as w}from"./ant-design-vue-qdrtx42b.js";import"./str-util-BDLBIRqu.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const A=e=>(j("data-v-dd67748a"),e=e(),F(),e),L={class:"form-preview"},C=A((()=>y("div",{class:"gutter-box"},"字段",-1))),S=A((()=>y("div",{class:"gutter-box"},"字段",-1))),T=A((()=>y("div",{class:"gutter-box"},"字段",-1))),P={key:1},N=A((()=>y("br",null,null,-1))),q=U({__name:"code-generator-table-config-form-insert-and-update",setup(j,{expose:F}){e("tableInfo");const U=a(),A={isSupportInsertAndUpdate:!0,pageType:I.MODAL.value,width:void 0,countPerLine:1},q=t({...A}),E={isSupportInsertAndUpdate:[{required:!0,message:"请输入 是否允许增加、删除"}],pageType:[{required:!0,message:"请输入 页面方式"}],width:[{required:!0,message:"请输入 宽度"}],countPerLine:[{required:!0,message:"请输入 每行数量"}]},D=l((()=>parseInt(20/q.countPerLine))),M=a([{title:"列名",dataIndex:"columnName",width:120,ellipsis:!0},{title:"列描述",dataIndex:"columnComment",width:120,ellipsis:!0},{title:"列类型",dataIndex:"dataType",width:100,ellipsis:!0},{title:"非空",dataIndex:"nullableFlag",width:60},{title:"必填",dataIndex:"required",width:35},{title:"新增",dataIndex:"insertFlag",width:35},{title:"更新",dataIndex:"updateFlag",width:35},{title:"前端组件",dataIndex:"frontComponent",width:100}]),O=a([]);function R(e,a){if(!e)return null;let t=e.filter((e=>e.columnName===a));return t&&t.length>0?t[0]:null}return F({setData:function(e,a){a.insertAndUpdate&&(q.isSupportInsertAndUpdate=a.insertAndUpdate.isSupportInsertAndUpdate,q.pageType=a.insertAndUpdate.pageType,q.width=a.insertAndUpdate.width,q.countPerLine=a.insertAndUpdate.countPerLine);let t=a.insertAndUpdate&&a.insertAndUpdate.fieldList?a.insertAndUpdate.fieldList:null,l=[];for(let n of e){let e=R(t,n.columnName),a={columnName:n.columnName,columnComment:n.columnComment,dataType:n.dataType,nullableFlag:n.nullableFlag,primaryKeyFlag:n.primaryKeyFlag,autoIncreaseFlag:n.autoIncreaseFlag};a.requiredFlag=e?e.requiredFlag:!a.nullableFlag,a.insertFlag=e?e.insertFlag:!a.nullableFlag,a.updateFlag=!!e&&e.updateFlag,e&&e.frontComponent?a.frontComponent=e.frontComponent:a.frontComponent=x(n.columnComment)?_.ENUM_SELECT.value:b(n.dataType),l.push(a)}O.value=l},getFieldsForm:function(){let e=O.value.map((e=>({columnName:e.columnName,requiredFlag:e.requiredFlag,insertFlag:e.insertFlag,updateFlag:e.updateFlag,frontComponent:e.frontComponent})));return{isSupportInsertAndUpdate:q.isSupportInsertAndUpdate,pageType:q.pageType,width:q.width,countPerLine:q.countPerLine,fieldList:e}},validateForm:function(){return new Promise(((e,a)=>{U.value.validate().then((()=>{e(!0)})).catch((e=>{w.error(" 请检查【3.增加、修改】表单，有参数验证错误"),a(e)}))}))}}),(e,a)=>{const t=n("a-radio-button"),l=n("a-radio-group"),j=n("a-form-item"),F=n("a-input"),b=n("a-input-number"),x=n("a-form"),_=n("a-col"),w=n("a-row"),A=n("a-tag"),R=n("a-checkbox"),z=n("a-table");return d(),r(v,null,[o(w,{class:"smart-margin-top10"},{default:u((()=>[o(_,{flex:"350px"},{default:u((()=>[o(x,{ref_key:"formRef",ref:U,model:q,style:{width:"350px"},rules:E,"label-col":{span:5},"wrapper-col":{span:16}},{default:u((()=>[o(j,{label:"是否支持",name:"isSupportInsertAndUpdate"},{default:u((()=>[o(l,{value:q.isSupportInsertAndUpdate,"onUpdate:value":a[0]||(a[0]=e=>q.isSupportInsertAndUpdate=e),"button-style":"solid"},{default:u((()=>[o(t,{value:!0},{default:u((()=>[m("支持")])),_:1}),o(t,{value:!1},{default:u((()=>[m("不支持添加、修改")])),_:1})])),_:1},8,["value"])])),_:1}),q.isSupportInsertAndUpdate?(d(),s(j,{key:0,label:"页面方式",name:"pageType"},{default:u((()=>[o(l,{value:q.pageType,"onUpdate:value":a[1]||(a[1]=e=>q.pageType=e),"button-style":"solid"},{default:u((()=>[o(t,{value:c(I).MODAL.value},{default:u((()=>[m(g(c(I).MODAL.desc),1)])),_:1},8,["value"]),o(t,{value:c(I).DRAWER.value},{default:u((()=>[m(g(c(I).DRAWER.desc),1)])),_:1},8,["value"])])),_:1},8,["value"])])),_:1})):i("",!0),q.isSupportInsertAndUpdate?p((d(),s(j,{key:1,label:"页面宽度",name:"width"},{default:u((()=>[o(F,{value:q.width,"onUpdate:value":a[2]||(a[2]=e=>q.width=e),placeholder:"Modal或者Drawer的width属性 "},null,8,["value"])])),_:1},512)),[[f,q.pageType!==c(I).PAGE.value]]):i("",!0),q.isSupportInsertAndUpdate?(d(),s(j,{key:2,label:"每行数量",name:"countPerLine"},{default:u((()=>[o(b,{style:{width:"100%"},max:24,value:q.countPerLine,"onUpdate:value":a[3]||(a[3]=e=>q.countPerLine=e),placeholder:"请输入 每行数量 "},null,8,["value"])])),_:1})):i("",!0)])),_:1},8,["model"])])),_:1}),q.isSupportInsertAndUpdate?(d(),s(_,{key:0,flex:"auto",style:{height:"auto",width:"500px"}},{default:u((()=>[y("div",L,[o(w,{gutter:20,justify:"space-around"},{default:u((()=>[(d(!0),r(v,null,h(q.countPerLine,(e=>(d(),s(_,{class:"form-item",span:D.value,key:e},{default:u((()=>[C])),_:2},1032,["span"])))),128))])),_:1}),o(w,{gutter:20,class:"smart-margin-top10",justify:"space-around"},{default:u((()=>[(d(!0),r(v,null,h(q.countPerLine,(e=>(d(),s(_,{class:"form-item",span:D.value,key:e},{default:u((()=>[S])),_:2},1032,["span"])))),128))])),_:1}),o(w,{gutter:20,class:"smart-margin-top10",justify:"space-around"},{default:u((()=>[(d(!0),r(v,null,h(q.countPerLine,(e=>(d(),s(_,{class:"form-item",span:D.value,key:e},{default:u((()=>[T])),_:2},1032,["span"])))),128))])),_:1})])])),_:1})):i("",!0)])),_:1}),q.isSupportInsertAndUpdate?(d(),s(z,{key:0,size:"small",scroll:{x:1e3},bordered:"",class:"smart-margin-top10",dataSource:O.value,columns:M.value,rowKey:"columnName",pagination:!1},{bodyCell:u((({text:e,record:a,index:t,column:l})=>["no"===l.dataIndex?(d(),r(v,{key:0},[m(g(t+1),1)],64)):i("",!0),"columnName"===l.dataIndex?(d(),r("span",P,[a.primaryKeyFlag?(d(),s(A,{key:0,color:"#f50",style:{"line-height":"12px"}},{default:u((()=>[m("主键")])),_:1})):i("",!0),a.autoIncreaseFlag?(d(),s(A,{key:1,color:"#f50",style:{"line-height":"12px"}},{default:u((()=>[m("自增")])),_:1})):i("",!0),N,m(" "+g(e),1)])):i("",!0),"nullableFlag"===l.dataIndex?(d(),r(v,{key:2},[e?i("",!0):(d(),s(A,{key:0,color:"error"},{default:u((()=>[m("非空")])),_:1}))],64)):i("",!0),"required"===l.dataIndex?(d(),s(R,{key:3,checked:a.requiredFlag,"onUpdate:checked":e=>a.requiredFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"insertFlag"===l.dataIndex?(d(),s(R,{key:4,checked:a.insertFlag,"onUpdate:checked":e=>a.insertFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"updateFlag"===l.dataIndex?(d(),s(R,{key:5,checked:a.updateFlag,"onUpdate:checked":e=>a.updateFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"frontComponent"===l.dataIndex?(d(),s(k,{key:6,width:"100%","enum-name":"CODE_FRONT_COMPONENT_ENUM",value:a.frontComponent,"onUpdate:value":e=>a.frontComponent=e},null,8,["value","onUpdate:value"])):i("",!0)])),_:1},8,["dataSource","columns"])):i("",!0)],64)}}},[["__scopeId","data-v-dd67748a"]]);export{q as default};
