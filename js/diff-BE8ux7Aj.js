function e(){}function n(e,n,t,o,r){for(var i,a=[];n;)a.push(n),i=n.previousComponent,delete n.previousComponent,n=i;a.reverse();for(var u=0,l=a.length,s=0,p=0;u<l;u++){var f=a[u];if(f.removed){if(f.value=e.join(o.slice(p,p+f.count)),p+=f.count,u&&a[u-1].added){var c=a[u-1];a[u-1]=a[u],a[u]=c}}else{if(!f.added&&r){var d=t.slice(s,s+f.count);d=d.map((function(e,n){var t=o[p+n];return t.length>e.length?t:e})),f.value=e.join(d)}else f.value=e.join(t.slice(s,s+f.count));s+=f.count,f.added||(p+=f.count)}}var h=a[l-1];return l>1&&"string"==typeof h.value&&(h.added||h.removed)&&e.equals("",h.value)&&(a[l-2].value+=h.value,a.pop()),a}e.prototype={diff:function(e,t){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.callback;"function"==typeof r&&(i=r,r={}),this.options=r;var a=this;function u(e){return i?(setTimeout((function(){i(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var l=(t=this.removeEmpty(this.tokenize(t))).length,s=e.length,p=1,f=l+s;r.maxEditLength&&(f=Math.min(f,r.maxEditLength));var c=null!==(o=r.timeout)&&void 0!==o?o:1/0,d=Date.now()+c,h=[{oldPos:-1,lastComponent:void 0}],v=this.extractCommon(h[0],t,e,0);if(h[0].oldPos+1>=s&&v+1>=l)return u([{value:this.join(t),count:t.length}]);var m=-1/0,g=1/0;function y(){for(var o=Math.max(m,-p);o<=Math.min(g,p);o+=2){var r=void 0,i=h[o-1],f=h[o+1];i&&(h[o-1]=void 0);var c=!1;if(f){var d=f.oldPos-o;c=f&&0<=d&&d<l}var y=i&&i.oldPos+1<s;if(c||y){if(r=!y||c&&i.oldPos+1<f.oldPos?a.addToPath(f,!0,void 0,0):a.addToPath(i,void 0,!0,1),v=a.extractCommon(r,t,e,o),r.oldPos+1>=s&&v+1>=l)return u(n(a,r.lastComponent,t,e,a.useLongestToken));h[o]=r,r.oldPos+1>=s&&(g=Math.min(g,o-1)),v+1>=l&&(m=Math.max(m,o+1))}else h[o]=void 0}p++}if(i)!function e(){setTimeout((function(){if(p>f||Date.now()>d)return i();y()||e()}),0)}();else for(;p<=f&&Date.now()<=d;){var w=y();if(w)return w}},addToPath:function(e,n,t,o){var r=e.lastComponent;return r&&r.added===n&&r.removed===t?{oldPos:e.oldPos+o,lastComponent:{count:r.count+1,added:n,removed:t,previousComponent:r.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:t,previousComponent:r}}},extractCommon:function(e,n,t,o){for(var r=n.length,i=t.length,a=e.oldPos,u=a-o,l=0;u+1<r&&a+1<i&&this.equals(n[u+1],t[a+1]);)u++,a++,l++;return l&&(e.lastComponent={count:l,previousComponent:e.lastComponent}),e.oldPos=a,u},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var t=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,o=/\S/,r=new e;r.equals=function(e,n){return this.options.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e===n||this.options.ignoreWhitespace&&!o.test(e)&&!o.test(n)},r.tokenize=function(e){for(var n=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),o=0;o<n.length-1;o++)!n[o+1]&&n[o+2]&&t.test(n[o])&&t.test(n[o+2])&&(n[o]+=n[o+2],n.splice(o+1,2),o--);return n};var i=new e;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}i.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var n=[],t=e.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var o=0;o<t.length;o++){var r=t[o];o%2&&!this.options.newlineIsToken?n[n.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),n.push(r))}return n},(new e).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new e).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var s=Object.prototype.toString,p=new e;function f(e,n,t,o,r){var i,u;for(n=n||[],t=t||[],o&&(e=o(r,e)),i=0;i<n.length;i+=1)if(n[i]===e)return t[i];if("[object Array]"===s.call(e)){for(n.push(e),u=new Array(e.length),t.push(u),i=0;i<e.length;i+=1)u[i]=f(e[i],n,t,o,r);return n.pop(),t.pop(),u}if(e&&e.toJSON&&(e=e.toJSON()),"object"===a(e)&&null!==e){n.push(e),u={},t.push(u);var l,p=[];for(l in e)e.hasOwnProperty(l)&&p.push(l);for(p.sort(),i=0;i<p.length;i+=1)u[l=p[i]]=f(e[l],n,t,o,l);n.pop(),t.pop()}else u=e;return u}p.useLongestToken=!0,p.tokenize=i.tokenize,p.castInput=function(e){var n=this.options,t=n.undefinedReplacement,o=n.stringifyReplacer,r=void 0===o?function(e,n){return void 0===n?t:n}:o;return"string"==typeof e?e:JSON.stringify(f(e,null,null,r),r,"  ")},p.equals=function(n,t){return e.prototype.equals.call(p,n.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var c=new e;function d(e,n,t,o,r,a,l){l||(l={}),void 0===l.context&&(l.context=4);var s=function(e,n,t){return i.diff(e,n,t)}(t,o,l);if(s){s.push({value:"",lines:[]});for(var p=[],f=0,c=0,d=[],h=1,v=1,m=function(e){var n=s[e],r=n.lines||n.value.replace(/\n$/,"").split("\n");if(n.lines=r,n.added||n.removed){var i;if(!f){var a=s[e-1];f=h,c=v,a&&(d=l.context>0?y(a.lines.slice(-l.context)):[],f-=d.length,c-=d.length)}(i=d).push.apply(i,u(r.map((function(e){return(n.added?"+":"-")+e})))),n.added?v+=r.length:h+=r.length}else{if(f)if(r.length<=2*l.context&&e<s.length-2){var m;(m=d).push.apply(m,u(y(r)))}else{var g,w=Math.min(r.length,l.context);(g=d).push.apply(g,u(y(r.slice(0,w))));var C={oldStart:f,oldLines:h-f+w,newStart:c,newLines:v-c+w,lines:d};if(e>=s.length-2&&r.length<=l.context){var S=/\n$/.test(t),b=/\n$/.test(o),P=0==r.length&&d.length>C.oldLines;!S&&P&&t.length>0&&d.splice(C.oldLines,0,"\\ No newline at end of file"),(S||P)&&b||d.push("\\ No newline at end of file")}p.push(C),f=0,c=0,d=[]}h+=r.length,v+=r.length}},g=0;g<s.length;g++)m(g);return{oldFileName:e,newFileName:n,oldHeader:r,newHeader:a,hunks:p}}function y(e){return e.map((function(e){return" "+e}))}}function h(e){if(Array.isArray(e))return e.map(h).join("\n");var n=[];e.oldFileName==e.newFileName&&n.push("Index: "+e.oldFileName),n.push("==================================================================="),n.push("--- "+e.oldFileName+(void 0===e.oldHeader?"":"\t"+e.oldHeader)),n.push("+++ "+e.newFileName+(void 0===e.newHeader?"":"\t"+e.newHeader));for(var t=0;t<e.hunks.length;t++){var o=e.hunks[t];0===o.oldLines&&(o.oldStart-=1),0===o.newLines&&(o.newStart-=1),n.push("@@ -"+o.oldStart+","+o.oldLines+" +"+o.newStart+","+o.newLines+" @@"),n.push.apply(n,o.lines)}return n.join("\n")+"\n"}function v(e,n,t,o,r,i){return function(e,n,t,o,r,i,a){return h(d(e,n,t,o,r,i,a))}(e,e,n,t,o,r,i)}c.tokenize=function(e){return e.slice()},c.join=c.removeEmpty=function(e){return e};export{v as c};
