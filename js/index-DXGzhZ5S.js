import{L as e,P as t,s as a}from"./index-SeYMZHv7.js";import{d as s}from"./default-time-ranges-C0dlfVG_.js";import{u as o}from"./ua-parser-js-D9VovvTw.js";import{c as i,l as r}from"./table-auto-height-Bjk5_fgC.js";import{r as l,a as n,e as u,l as d,b2 as p,b as m,o as c,c as g,ai as f,bz as v,u as j,J as y,ah as h,F as w,ag as b,be as S}from"./@vue-wTDZSr7R.js";import"./ant-design-vue-qdrtx42b.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-Dk7pxPyP.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const z={key:1},I={class:"smart-query-table-page"},_={__name:"index",setup(_){const x=l([{title:"时间",dataIndex:"createTime",width:150},{title:"登录方式",dataIndex:"remark",ellipsis:!0,width:90},{title:"登录设备",dataIndex:"userAgent",ellipsis:!0},{title:"IP地区",dataIndex:"loginIpRegion",ellipsis:!0},{title:"IP",dataIndex:"loginIp",ellipsis:!0,width:120},{title:"结果",dataIndex:"loginResult",ellipsis:!0,width:90}]),k={userName:"",ip:"",startDate:void 0,endDate:void 0,pageNum:1,pageSize:10},C=n({...k}),L=l([]),O=s;function N(e,t){C.startDate=t[0],C.endDate=t[1]}const q=l(!1),P=l([]),A=l(0);function D(){Object.assign(C,k),L.value=[],R()}function E(){C.pageNum=1,R()}async function R(){try{q.value=!0;let e=await r.queryListLogin(C);for(const a of e.data.list){if(!a.userAgent)continue;let e=o(a.userAgent);a.browser=e.browser.name,a.os=e.os.name,a.device=e.device.vendor?e.device.vendor+e.device.model:""}const t=e.data.list;A.value=e.data.total,P.value=t}catch(e){a.captureError(e)}finally{q.value=!1}}const U=l(100),F=l();function G(){i(U,[F],10)}return window.addEventListener("resize",G),u((()=>{R(),G()})),d((()=>{window.removeEventListener("resize",G)})),(a,s)=>{const o=p("a-range-picker"),i=p("a-form-item"),r=p("SearchOutlined"),l=p("a-button"),n=p("ReloadOutlined"),u=p("a-button-group"),d=p("a-row"),_=p("a-form"),k=p("a-tag"),U=p("a-table"),G=p("a-pagination");return c(),m(w,null,[g(_,{class:"smart-query-form",ref_key:"queryFormRef",ref:F},{default:v((()=>[g(d,{class:"smart-query-form-row"},{default:v((()=>[g(i,{label:"时间",class:"smart-query-form-item"},{default:v((()=>[g(o,{onChange:N,value:L.value,"onUpdate:value":s[0]||(s[0]=e=>L.value=e),presets:j(O),style:{width:"240px"}},null,8,["value","presets"])])),_:1}),g(i,{class:"smart-query-form-item smart-margin-left10"},{default:v((()=>[g(u,null,{default:v((()=>[g(l,{type:"primary",onClick:E},{icon:v((()=>[g(r)])),default:v((()=>[y(" 查询 ")])),_:1}),g(l,{onClick:D},{icon:v((()=>[g(n)])),default:v((()=>[y(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),g(U,{size:"small",dataSource:P.value,columns:x.value,bordered:"",rowKey:"loginLogId",pagination:!1,loading:q.value},{bodyCell:v((({text:t,record:a,column:s})=>["loginResult"===s.dataIndex?(c(),m(w,{key:0},[t===j(e).LOGIN_SUCCESS.value?(c(),b(k,{key:0,color:"success"},{default:v((()=>[y("登录成功")])),_:1})):h("",!0),t===j(e).LOGIN_FAIL.value?(c(),b(k,{key:1,color:"error"},{default:v((()=>[y("登录失败")])),_:1})):h("",!0),t===j(e).LOGIN_OUT.value?(c(),b(k,{key:2,color:"processing"},{default:v((()=>[y("退出登录")])),_:1})):h("",!0)],64)):h("",!0),"userAgent"===s.dataIndex?(c(),m("div",z,S(a.browser)+" / "+S(a.os)+" / "+S(a.device),1)):h("",!0)])),_:1},8,["dataSource","columns","loading"]),f("div",I,[g(G,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:j(t),defaultPageSize:C.pageSize,current:C.pageNum,"onUpdate:current":s[1]||(s[1]=e=>C.pageNum=e),pageSize:C.pageSize,"onUpdate:pageSize":s[2]||(s[2]=e=>C.pageSize=e),total:A.value,onChange:R,onShowSizeChange:R,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])],64)}}};export{_ as default};
