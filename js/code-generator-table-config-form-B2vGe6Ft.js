import{_ as e,S as t,s as a}from"./index-SeYMZHv7.js";import o from"./code-generator-table-config-form-basic-Ba8ZL0g6.js";import{c as r}from"./code-generator-api-Bn5HnNZY.js";import l from"./code-generator-table-config-form-field-B7rDMleX.js";import s from"./code-generator-table-config-form-insert-and-update-W4IJ1q0R.js";import i from"./code-generator-table-config-form-delete-DwSCfJIA.js";import n from"./code-generator-table-config-form-query-field-DJLrouZ2.js";import u from"./code-generator-table-config-form-table-field-CG6wiOCt.js";import{b as m}from"./ant-design-vue-qdrtx42b.js";import{r as d,a as f,b2 as p,ag as c,o as v,bz as j,c as b,ai as y,J as g,n as _,p as F}from"./@vue-wTDZSr7R.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./str-util-BDLBIRqu.js";import"./code-generator-util-BIgdvUgd.js";import"./index-DPBcXeae.js";import"./sortablejs-CRp0PNdb.js";const k=e({__name:"code-generator-table-config-form",emits:["reloadList"],setup(e,{expose:k,emit:h}){const w=d(!1);function C(){w.value=!1}const R=d(),D=d(),x=d(),T=d(),N=d(),q=d(),A=d([]),z=d({});const E=f({tableName:"",tableComment:"",createTime:"",updateTime:""}),I=d("1"),K=h;async function U(){t.show();try{let e=await R.value.validateForm(),t=await x.value.validateForm(),a=await T.value.validateForm();if(!e||!t||!a)return;let o=D.value.getFieldsForm(),l=R.value.getBasicForm(),s=x.value.getFieldsForm(),i=T.value.getForm(),n=N.value.getFieldsForm(),u=q.value.getTaleFieldsForm();await r.updateConfig({tableName:E.tableName,basic:l,fields:o,insertAndUpdate:s,deleteInfo:i,queryFields:n,tableFields:u}),m.success("保存成功"),K("reloadList"),C()}catch(e){a.captureError(e)}finally{t.hide()}}return k({showModal:function(e){Object.assign(E,e),E.createTime=e.createTime?e.createTime:new Date,I.value="1",w.value=!0,_((()=>{!async function(){try{t.show();let e=await r.getTableColumns(E.tableName);A.value=e.data;let a=await r.getConfig(E.tableName);z.value=a.data,R.value.setData(z.value),D.value.setData(A.value,z.value),x.value.setData(A.value,z.value),T.value.setData(A.value,z.value),N.value.setData(A.value,z.value),q.value.setData(A.value,z.value)}catch(e){a.captureError(e)}finally{t.hide()}}()}))}}),F("tableInfo",E),F("tableColumns",A),F("tableConfig",z),(e,t)=>{const a=p("info-circle-outlined"),r=p("a-tab-pane"),m=p("unordered-list-outlined"),d=p("save-outlined"),f=p("delete-outlined"),_=p("file-search-outlined"),F=p("table-outlined"),k=p("a-tabs"),h=p("a-button"),A=p("a-space"),z=p("a-drawer");return v(),c(z,{title:"代码配置",style:{},open:w.value,width:1200,footerStyle:{textAlign:"right"},onClose:C,maskClosable:!1,destroyOnClose:!0},{footer:j((()=>[b(A,null,{default:j((()=>[b(h,{onClick:C},{default:j((()=>[g("取消")])),_:1}),b(h,{type:"primary",onClick:U},{default:j((()=>[g("保存")])),_:1})])),_:1})])),default:j((()=>[b(k,{activeKey:I.value,"onUpdate:activeKey":t[0]||(t[0]=e=>I.value=e)},{default:j((()=>[b(r,{key:"1",forceRender:!0},{tab:j((()=>[y("span",null,[b(a),g(" 1.基础命名 ")])])),default:j((()=>[b(o,{ref_key:"basicRef",ref:R},null,512)])),_:1}),b(r,{key:"2",forceRender:!0},{tab:j((()=>[y("span",null,[b(m),g(" 2.字段列表 ")])])),default:j((()=>[b(l,{ref_key:"fieldRef",ref:D},null,512)])),_:1}),b(r,{key:"3",forceRender:!0},{tab:j((()=>[y("span",null,[b(d),g(" 3.增加、修改 ")])])),default:j((()=>[b(s,{ref_key:"insertAndUpdateRef",ref:x},null,512)])),_:1}),b(r,{key:"4",forceRender:!0},{tab:j((()=>[y("span",null,[b(f),g(" 4.删除 ")])])),default:j((()=>[b(i,{ref_key:"deleteRef",ref:T},null,512)])),_:1}),b(r,{key:"5",forceRender:!0},{tab:j((()=>[y("span",null,[b(_),g(" 5、查询条件 ")])])),default:j((()=>[b(n,{ref_key:"queryRef",ref:N},null,512)])),_:1}),b(r,{key:"6",forceRender:!0},{tab:j((()=>[y("span",null,[b(F),g(" 6、列表 ")])])),default:j((()=>[b(u,{ref_key:"tableFieldRef",ref:q},null,512)])),_:1})])),_:1},8,["activeKey"])])),_:1},8,["open"])}}},[["__scopeId","data-v-7490e62d"]]);export{k as default};
