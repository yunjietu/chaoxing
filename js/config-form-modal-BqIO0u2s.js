import{r as e,a,b2 as o,ag as n,o as l,bz as t,c as i,u,y as r,ai as s,bt as c}from"./@vue-wTDZSr7R.js";import{b as f,p as d,S as g,s as m}from"./index-SeYMZHv7.js";import{b as p}from"./ant-design-vue-qdrtx42b.js";
/*
 * 配置
 *
 * @Author:    卓大
 * @Date:      2022-09-03 21:51:54
 * @Wechat:    zhuda1024
 * @Email:     lab1024@163.com
 * @Copyright  1024创新实验室 （ https://1024lab.net ），Since 2012
 */const y={queryList:e=>d("/support/config/query",e),addConfig:e=>d("/support/config/add",e),updateConfig:e=>d("/support/config/update",e),queryByKey:e=>f(`/support/config/queryByKey?configKey=${e}`)},v={__name:"config-form-modal",emits:["reloadList"],setup(f,{expose:d,emit:v}){const b=v,_=e(),h={configId:void 0,configKey:"",configName:"",configValue:"",remark:""};let K=a({...h});const j={configKey:[{required:!0,message:"请输入参数key"}],configName:[{required:!0,message:"请输入参数名称"}],configValue:[{required:!0,message:"请输入参数值"}]},k=e(!1);function q(){Object.assign(K,h),k.value=!1}function x(){_.value.validate().then((async()=>{g.show();try{K.configId?await y.updateConfig(K):await y.addConfig(K),p.success((K.configId?"修改":"添加")+"成功"),b("reloadList"),q()}catch(e){m.captureError(e)}finally{g.hide()}})).catch((e=>{p.error("参数验证错误，请仔细填写表单数据!")}))}return d({showModal:function(e){Object.assign(K,h),e&&Object.assign(K,e),k.value=!0}}),(e,a)=>{const f=o("a-input"),d=o("a-form-item"),g=o("a-form"),m=o("a-modal");return l(),n(m,{open:k.value,title:u(K).configId?"编辑":"添加","ok-text":"确认","cancel-text":"取消",onOk:x,onCancel:q},{default:t((()=>[i(g,{ref_key:"formRef",ref:_,model:u(K),rules:j,"label-col":{span:5}},{default:t((()=>[i(d,{label:"参数Key",name:"configKey"},{default:t((()=>[i(f,{value:u(K).configKey,"onUpdate:value":a[0]||(a[0]=e=>u(K).configKey=e),placeholder:"请输入参数Key"},null,8,["value"])])),_:1}),i(d,{label:"参数名称",name:"configName"},{default:t((()=>[i(f,{value:u(K).configName,"onUpdate:value":a[1]||(a[1]=e=>u(K).configName=e),placeholder:"请输入参数名称"},null,8,["value"])])),_:1}),i(d,{label:"参数值",name:"configValue"},{default:t((()=>[i(f,{value:u(K).configValue,"onUpdate:value":a[2]||(a[2]=e=>u(K).configValue=e),placeholder:"请输入参数值"},null,8,["value"])])),_:1}),i(d,{label:"备注",name:"remark"},{default:t((()=>[r(s("textarea",{"onUpdate:modelValue":a[3]||(a[3]=e=>u(K).remark=e),style:{width:"100%",height:"100px",outline:"none"}},null,512),[[c,u(K).remark]])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}},b=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));export{v as _,b as a,y as c};
