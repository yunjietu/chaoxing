import{_ as e,y as a,e as t}from"./index-SeYMZHv7.js";import{u as s}from"./ua-parser-js-D9VovvTw.js";import{l as o}from"./lunar-javascript-DlxEJW_Z.js";import{_ as n}from"./lodash-DG05lPuJ.js";import{ao as l,ap as r}from"./@ant-design-BpN5YQ3K.js";import{M as i,b as u}from"./ant-design-vue-qdrtx42b.js";import{m,r as p,b2 as c,b as d,o as v,c as g,bz as f,ai as j,J as h,u as y,be as b,ah as $,aY as w,aW as x,h as N}from"./@vue-wTDZSr7R.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-Dk7pxPyP.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./vue-LkNShnlx.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./@ctrl-BZ4iwDfm.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const L=["梦想不会自动成真，奋斗是其桥梁；目标不会自动抵达，奔跑才有远方!","成长是一场和自己的比赛，不要担心别人会做得比你好，只要你每天都比前一天做得好!","最慢的步伐不是跬步，而是徘徊；最快的脚步不是冲刺，而是坚持!","平日里的千锤百炼，才能托举出光彩时刻；逆境中的亮剑、失败后的奋起，才能让梦想成真。哪有什么一战成名，其实都是百炼成钢。“天才”都是汗水浇灌出来的，天赋或许可以决定起点，但唯有坚持和努力才能达到终点。","历尽天华成此景，人间万事出艰辛。志不求易者成，事不避难者进!","每一个不向命运低头、努力生活的人，都值得被尊重。","青年的肩上，从不只有清风明月，更有责任担当。岁月因青春慨然以赴而更加美好，世间因少年挺身向前而更加瑰丽。请相信，不会有人永远年轻，但永远有人年轻。","人生路上，总有人走得比你快，但不必介意，也不必着急。一味羡慕别人的成绩，只会给自己平添压力、徒增烦恼。不盲从别人的脚步，坚定目标，才能找到自己的节奏，进而逢山开路、遇水搭桥。","没有理所当然的成功，也没有毫无道理的平庸。值得拥有的东西，永远都来之不易。所以在徘徊迷茫时，不要质疑你的付出，这些累积都会变成一种沉淀，默默为你铺路!"],_={class:"user-header"},I={class:"department-info",style:{color:"#666","margin-left":"20px"}},k={class:"balance-info",style:{color:"#1890ff","margin-left":"20px"}},C={class:"day-info",style:{color:"#333"}},D={class:"left-content"},U={class:"last-login-info"},B={class:"sentence",href:"#",target:"_blank"},T=(e=>(w("data-v-7e8d111e"),e=e(),x(),e))((()=>j("div",{class:"weather"},[j("iframe",{width:"100%",scrolling:"no",height:"50",frameborder:"0",allowtransparency:"true",src:"//i.tianqi.com/index.php?c=code&id=12&icon=1&num=3&site=12"})],-1))),z=e({__name:"home-header",setup(e){const w=a(),x=m((()=>w.departmentName)),z=m((()=>{let e="",a=(new Date).getHours();return e=a>0&&a<=6?"午夜好，":a>6&&a<=11?"早上好，":a>11&&a<=14?"中午好，":a>14&&a<=18?"下午好，":"晚上好，",e+w.$state.actualName})),J=m((()=>{let e="";if(w.$state.lastLoginTime&&(e=e+"上次登录:"+w.$state.lastLoginTime),w.$state.lastLoginUserAgent){let a=s(w.$state.lastLoginUserAgent);e+="; 设备:",a.browser.name&&(e=e+" "+a.browser.name),a.os.name&&(e=e+" "+a.os.name);let t=a.device.vendor?a.device.vendor+a.device.model:null;t&&(e=e+" "+t+";")}return w.$state.lastLoginIpRegion&&(e=e+"; "+w.$state.lastLoginIpRegion),w.$state.lastLoginIp&&(e=e+"; "+w.$state.lastLoginIp),e})),S=m((()=>{let e=o.Solar.fromDate(new Date),a=e.toString(),t=e.getWeekInChinese(),s=o.Lunar.fromDate(new Date),n=s.getMonthInChinese(),l=s.getDayInChinese(),r=s.getPrevJieQi().getName(),i=s.getNextJieQi();return`${a} 星期${t}，农历${n}月${l}（当前${r}，${i.getName()+" "+i.getSolar().toYmd()} ）`})),A=m((()=>L[n.random(0,L.length-1)])),M=p("--"),O=w.employeeId;function Q(){O&&t.getBalance(O).then((e=>{M.value=e.data?.balance??"--"}))}function R(){t.getBalanceLogs(O).then((e=>{const a=e.data||[];i.info({title:"余额明细",width:600,content:N("div",{style:"text-align: center;"},[N("div",{style:"margin-bottom: 12px;"},`当前余额：￥${M.value}`),N("table",{class:"ant-table",style:"width:100%;margin-top:12px;"},[N("thead",{},[N("tr",{},[N("th",{},"时间"),N("th",{},"类型"),N("th",{},"变动金额"),N("th",{},"变动后余额"),N("th",{},"备注")])]),N("tbody",{},a.map((e=>N("tr",{},[N("td",{},e.createTime),N("td",{},1===e.type?"充值":"消费"),N("td",{},e.amount),N("td",{},e.afterBalance),N("td",{},e.remark||"")]))))])])})}))}Q();const W=p(!1),Y=p(""),q=p(!1),E=p("");function F(){Y.value="",W.value=!0}async function H(){!Y.value||isNaN(Y.value)||Number(Y.value)<=0?u.error("请输入有效金额"):(await t.recharge(O,Y.value,"用户自助充值"),u.success("充值成功"),W.value=!1,Q())}async function P(){!E.value||isNaN(E.value)||Number(E.value)<=0?u.error("请输入有效金额"):(await t.consume(O,E.value,"用户自助消费"),u.success("消费成功"),q.value=!1,Q())}const G=w.administratorFlag;return(e,a)=>{const t=c("a-row"),s=c("a-page-header"),o=c("a-input"),n=c("a-modal");return v(),d("div",_,[g(s,{title:z.value},{subTitle:f((()=>[j("span",I,"所属部门："+b(x.value),1),j("span",k,[h("余额：￥"+b(M.value)+" ",1),j("a",{onClick:R,style:{"margin-left":"8px"}},"明细"),y(G)?(v(),d("a",{key:0,onClick:F,style:{"margin-left":"8px"}},"充值")):$("",!0)])])),extra:f((()=>[j("p",C,b(S.value),1)])),default:f((()=>[g(t,{class:"content"},{default:f((()=>[j("span",D,[j("p",U,[g(y(l)),h(b(J.value),1)]),j("a",B,[g(y(r),{spin:""}),h(" "+b(A.value),1)])]),T])),_:1})])),_:1},8,["title"]),g(n,{open:W.value,"onUpdate:open":a[1]||(a[1]=e=>W.value=e),title:"充值",onOk:H,onCancel:a[2]||(a[2]=()=>{W.value=!1})},{default:f((()=>[g(o,{value:Y.value,"onUpdate:value":a[0]||(a[0]=e=>Y.value=e),placeholder:"请输入充值金额",type:"number"},null,8,["value"])])),_:1},8,["open"]),g(n,{open:q.value,"onUpdate:open":a[4]||(a[4]=e=>q.value=e),title:"消费",onOk:P,onCancel:a[5]||(a[5]=()=>{q.value=!1})},{default:f((()=>[g(o,{value:E.value,"onUpdate:value":a[3]||(a[3]=e=>E.value=e),placeholder:"请输入消费金额",type:"number"},null,8,["value"])])),_:1},8,["open"])])}}},[["__scopeId","data-v-7e8d111e"]]);export{z as default};
