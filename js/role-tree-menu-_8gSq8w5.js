import{M as e}from"./index-SeYMZHv7.js";import{_ as t}from"./lodash-DG05lPuJ.js";import{d as a}from"./pinia-BY_IhmGU.js";import d from"./role-tree-point-Cr7Tuzjj.js";import{b2 as n,b as i,o as r,b0 as l,F as c,ai as h,ag as s,ah as u,c as o,bz as m,J as p,be as k,u as f,aR as C}from"./@vue-wTDZSr7R.js";
/*
 * 角色
 *
 * @Author:    1024创新实验室-主任：卓大
 * @Date:      2022-09-06 20:54:39
 * @Wechat:    zhuda1024
 * @Email:     lab1024@163.com
 * @Copyright  1024创新实验室 （ https://1024lab.net ），Since 2012
 */const D=a({id:"role",state:()=>({checkedData:[],treeMap:new Map}),actions:{initCheckedData(e){this.checkedData=[...new Set(e)]},addCheckedData(e){this.checkedData.some((t=>t===e))||this.checkedData.push(e)},addCheckedDataAndChildren(e){let t=this.checkedData.findIndex((t=>t===e.menuId));e.menuId&&-1===t&&this.addCheckedData(e.menuId),e.children&&e.children.forEach((e=>{this.addCheckedDataAndChildren(e)}))},deleteCheckedData(e){this.checkedData.splice(e,1)},deleteCheckedDataAndChildren(e){let t=this.checkedData.findIndex((t=>t===e.menuId));-1!==t&&this.deleteCheckedData(t),e.children&&e.children.forEach((e=>{this.deleteCheckedDataAndChildren(e)}))},initTreeMap(e){for(let a of e)a.menuId&&(this.treeMap.set(a.menuId,a),a.children&&!t.isEmpty(a.children)&&this.initTreeMap(a.children))},selectUpperLevel(e){let t=e.parentId;if(!t)return;let a=this.treeMap.get(t);if(!a)return;let d=this.checkedData.findIndex((e=>a.menuId===e));a.menuId&&-1===d&&this.addCheckedData(a.menuId),a.parentId&&this.selectUpperLevel(a)}}}),I={key:0},x={__name:"role-tree-menu",props:{tree:{type:Array,default:()=>[]},index:{type:Number,default:0}},emits:["update:value"],setup(t){const a=t;let b=D();function y(e){if(!e.menuId)return;-1===b.checkedData.indexOf(e.menuId)?(b.addCheckedDataAndChildren(e),b.selectUpperLevel(e),e.contextMenuId&&b.addCheckedData(e.contextMenuId)):b.deleteCheckedDataAndChildren(e)}return(t,D)=>{const b=n("a-checkbox");return r(!0),i(c,null,l(a.tree,(t=>(r(),i("li",{key:t.menuId},[h("div",{class:"menu",style:C({marginLeft:4*a.index+"%"})},[o(b,{onChange:e=>y(t),class:"checked-box-label",value:t.menuId},{default:m((()=>[p(k(t.menuName),1)])),_:2},1032,["onChange","value"]),t.children&&t.children.some((t=>t.menuType===f(e).POINTS.value))?(r(),i("div",I,[o(d,{tree:t.children,onSelectCheckbox:y},null,8,["tree"])])):u("",!0)],4),t.children&&!t.children.some((t=>t.menuType===f(e).POINTS.value))?(r(),s(x,{key:0,tree:t.children,index:a.index+1},null,8,["tree","index"])):u("",!0)])))),128)}}},b=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{x as _,b as r,D as u};
