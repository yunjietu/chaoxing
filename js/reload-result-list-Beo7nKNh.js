import{r as t}from"./reload-api-CHaGlhbP.js";import{s as e}from"./index-SeYMZHv7.js";import{r as o,a as s,b2 as a,ag as r,o as i,bz as l,c as n,J as p,ai as d,be as m,ah as u}from"./@vue-wTDZSr7R.js";import"./ant-design-vue-qdrtx42b.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-BpN5YQ3K.js";import"./vue-LkNShnlx.js";import"./@ctrl-BZ4iwDfm.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-BUNCmyKw.js";import"./stylis-cmx5w8r8.js";import"./vue-types-Ci_fOQyt.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-Dk7pxPyP.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-DG05lPuJ.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DZLdcVEL.js";import"./@intlify-D9VlDxbJ.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-DUpU9tZe.js";import"./sm-crypto-CNoQwlJF.js";import"./jsbn-aJNYh3Pg.js";import"./nprogress-Buvl-64T.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const c={style:{margin:"0","font-size":"12px"}},j={__name:"reload-result-list",setup(j,{expose:y}){y({showModal:function(t){x=t,h(),f.value=!0}});const f=o(!1);function v(){f.value=!1}let x="";const b=o(!1),g=o([]);async function h(){try{b.value=!0;let e=await t.queryReloadResult(x),o=1;for(const t of e.data)t.id=o++;g.value=e.data}catch(o){e.captureError(o)}finally{b.value=!1}}const w=s([{title:"标签",dataIndex:"tag"},{title:"参数",dataIndex:"args"},{title:"运行结果",dataIndex:"result"},{title:"异常",dataIndex:"exception",ellipsis:!0},{title:"创建时间",dataIndex:"createTime"}]);return(t,e)=>{const o=a("ReloadOutlined"),s=a("a-button"),j=a("a-tag"),y=a("a-table"),x=a("a-modal");return i(),r(x,{open:f.value,title:"reload结果列表",width:"60%",footer:null,onCancel:v},{default:l((()=>[n(s,{type:"primary",onClick:h,size:"small"},{icon:l((()=>[n(o)])),default:l((()=>[p(" 刷新 ")])),_:1}),n(y,{scroll:{y:350},size:"small",bordered:"",rowKey:"id",class:"smart-margin-top10",dataSource:g.value,columns:w},{bodyCell:l((({text:t,column:e})=>["result"===e.dataIndex?(i(),r(j,{key:0,color:t?"success":"error"},{default:l((()=>[p(m(t?"成功":"失败"),1)])),_:2},1032,["color"])):u("",!0)])),expandedRowRender:l((({record:t})=>[d("pre",c,"          "+m(t.exception)+"\n        ",1)])),_:1},8,["dataSource","columns"])])),_:1},8,["open"])}}};export{j as default};
